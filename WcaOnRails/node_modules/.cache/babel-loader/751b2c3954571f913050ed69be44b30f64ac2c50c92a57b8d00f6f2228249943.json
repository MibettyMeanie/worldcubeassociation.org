{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/Panel/Board/RegionManager.jsx\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React from 'react';\nimport { Button, ButtonGroup, Confirm, Form, Header, Icon, List, Modal, Table } from 'semantic-ui-react';\nimport useLoadedData from \"../../../lib/hooks/useLoadedData\";\nimport { fetchUserGroupsUrl, addUserGroupsUrl, userGroupsUpdateUrl, apiV0Urls } from \"../../../lib/requests/routes.js.erb\";\nimport { delegateRegionsStatus } from \"../../../lib/wca-data.js.erb\";\nimport Errored from \"../../Requests/Errored\";\nimport Loading from \"../../Requests/Loading\";\nimport useSaveAction from \"../../../lib/hooks/useSaveAction\";\nimport WcaSearch from \"../../SearchWidget/WcaSearch\";\nvar defaultRegion = {\n  name: '',\n  group_type: 'delegate_regions',\n  parent_group_id: null,\n  is_active: true,\n  is_hidden: false,\n  friendlyId: ''\n};\nfunction UserGroupVisibility(_ref) {\n  var userGroup = _ref.userGroup,\n    save = _ref.save,\n    sync = _ref.sync;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    open = _React$useState2[0],\n    setOpen = _React$useState2[1];\n  var iconName = userGroup.is_active ? 'eye' : 'eye slash';\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(List.Icon, {\n    name: iconName,\n    link: true,\n    onClick: function onClick() {\n      return setOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Confirm, {\n    open: open,\n    content: \"Are you sure you want to \".concat(userGroup.is_active ? 'deactivate' : 'activate', \" \").concat(userGroup.name, \"?\"),\n    onCancel: function onCancel() {\n      return setOpen(false);\n    },\n    onConfirm: function onConfirm() {\n      setOpen(false);\n      save(userGroupsUpdateUrl(userGroup.id), {\n        is_active: !userGroup.is_active,\n        is_hidden: userGroup.is_hidden\n      }, sync);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }));\n}\nexport default function RegionManager() {\n  var _this = this;\n  var _useLoadedData = useLoadedData(fetchUserGroupsUrl('delegate_regions')),\n    data = _useLoadedData.data,\n    fetchLoading = _useLoadedData.loading,\n    error = _useLoadedData.error,\n    sync = _useLoadedData.sync;\n  var _useSaveAction = useSaveAction(),\n    save = _useSaveAction.save,\n    saving = _useSaveAction.saving;\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    openModalType = _React$useState4[0],\n    setOpenModalType = _React$useState4[1];\n  var _React$useState5 = React.useState(defaultRegion),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    newRegion = _React$useState6[0],\n    setNewRegion = _React$useState6[1];\n  var _React$useState7 = React.useState(),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    saveError = _React$useState8[0],\n    setSaveError = _React$useState8[1];\n  var _React$useState9 = React.useState(),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    selectedGroup = _React$useState10[0],\n    setSelectedGroup = _React$useState10[1];\n  var _React$useState11 = React.useState(),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    newLeadDelegate = _React$useState12[0],\n    setNewLeadDelegate = _React$useState12[1];\n  var _React$useState13 = React.useState(false),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    loading = _React$useState14[0],\n    setLoading = _React$useState14[1];\n  var selectedGroupAndShowModal = function selectedGroupAndShowModal(group) {\n    setSelectedGroup(group);\n    setOpenModalType('newLeadDelegate');\n  };\n  var closeModal = function closeModal() {\n    return setOpenModalType(null);\n  };\n  var regions = React.useMemo(function () {\n    return data === null || data === void 0 ? void 0 : data.filter(function (group) {\n      return !group.parent_group_id;\n    });\n  }, [data]);\n  var subRegions = React.useMemo(function () {\n    var subRegionsList = (data === null || data === void 0 ? void 0 : data.filter(function (group) {\n      return group.parent_group_id;\n    })) || [];\n    return Object.groupBy(subRegionsList, function (group) {\n      return group.parent_group_id;\n    });\n  }, [data]);\n  if (loading || fetchLoading || saving) return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 49\n    }\n  });\n  if (error || saveError) return /*#__PURE__*/React.createElement(Errored, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 34\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    as: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Region Manager\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Visibility: Whether the region is active & visible to the public or not.\"), /*#__PURE__*/React.createElement(Table, {\n    celled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Region\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Senior Delegate\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Sub-Regions\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Regional Delegate\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"Visibility\"))), /*#__PURE__*/React.createElement(Table.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, regions.map(function (region) {\n    var _subRegions$region$id;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table.Row, {\n      key: region.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, region.name), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, region.lead_user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n      name: \"edit\",\n      link: true,\n      onClick: function onClick() {\n        return selectedGroupAndShowModal(region);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }), region.lead_user.name) : /*#__PURE__*/React.createElement(Icon, {\n      name: \"plus\",\n      link: true,\n      onClick: function onClick() {\n        return selectedGroupAndShowModal(region);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(UserGroupVisibility, {\n      userGroup: region,\n      save: save,\n      sync: sync,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }))), (_subRegions$region$id = subRegions[region.id]) === null || _subRegions$region$id === void 0 ? void 0 : _subRegions$region$id.map(function (subRegion) {\n      return /*#__PURE__*/React.createElement(Table.Row, {\n        key: subRegion.id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 19\n        }\n      }, subRegion.name), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 19\n        }\n      }, subRegion.lead_user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n        name: \"edit\",\n        link: true,\n        onClick: function onClick() {\n          return selectedGroupAndShowModal(subRegion);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 27\n        }\n      }), subRegion.lead_user.name) : /*#__PURE__*/React.createElement(Icon, {\n        name: \"plus\",\n        link: true,\n        onClick: function onClick() {\n          return selectedGroupAndShowModal(subRegion);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(UserGroupVisibility, {\n        userGroup: subRegion,\n        save: save,\n        sync: sync,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }\n      })));\n    }));\n  }))), /*#__PURE__*/React.createElement(ButtonGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setOpenModalType('newRegion');\n    },\n    disabled: saving,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, \"Add new region\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setOpenModalType('newSubregion');\n    },\n    disabled: saving,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, \"Add new subregion\")), /*#__PURE__*/React.createElement(Modal, {\n    size: \"fullscreen\",\n    onClose: function onClose() {\n      closeModal();\n      setNewRegion(defaultRegion);\n    },\n    open: openModalType === 'newRegion' || openModalType === 'newSubregion',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, openModalType === 'newSubregion' && /*#__PURE__*/React.createElement(Form.Dropdown, {\n    label: \"Parent region\",\n    fluid: true,\n    selection: true,\n    value: newRegion.parent_group_id,\n    onChange: function onChange(e, _ref2) {\n      var value = _ref2.value;\n      return setNewRegion(_objectSpread(_objectSpread({}, newRegion), {}, {\n        parent_group_id: value\n      }));\n    },\n    options: regions.map(function (region) {\n      return {\n        key: region.id,\n        text: region.name,\n        value: region.id\n      };\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Name\",\n    value: newRegion.name,\n    onChange: function onChange(e, _ref3) {\n      var value = _ref3.value;\n      return setNewRegion(_objectSpread(_objectSpread({}, newRegion), {}, {\n        name: value\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Friendly ID\",\n    value: newRegion.friendlyId,\n    onChange: function onChange(e, _ref4) {\n      var value = _ref4.value;\n      return setNewRegion(_objectSpread(_objectSpread({}, newRegion), {}, {\n        friendlyId: value\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Form.Button, {\n    onClick: function onClick() {\n      closeModal();\n      setNewRegion(defaultRegion);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Form.Button, {\n    disabled: newRegion.name.length === 0 || openModalType === 'newSubregion' && !newRegion.parent_group_id,\n    onClick: function onClick() {\n      closeModal();\n      save(addUserGroupsUrl, newRegion, function () {\n        return sync();\n      }, {\n        method: 'POST'\n      }, setSaveError);\n      setNewRegion(defaultRegion);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"Save\")))), /*#__PURE__*/React.createElement(Modal, {\n    onClose: function onClose() {\n      closeModal();\n      setSelectedGroup(null);\n      setNewLeadDelegate(null);\n    },\n    open: openModalType === 'newLeadDelegate',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    label: \"New Lead Delegate\",\n    control: WcaSearch,\n    value: newLeadDelegate,\n    onChange: function onChange(e, _ref5) {\n      var value = _ref5.value;\n      return setNewLeadDelegate(value);\n    },\n    model: \"user\",\n    multiple: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Form.Button, {\n    onClick: function onClick() {\n      closeModal();\n      setSelectedGroup(null);\n      setNewLeadDelegate(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Form.Button, {\n    disabled: !newLeadDelegate,\n    onClick: function onClick() {\n      closeModal();\n      setLoading(true);\n      save(apiV0Urls.userRoles.create(), {\n        userId: newLeadDelegate.id,\n        groupId: selectedGroup.id,\n        status: selectedGroup.parent_group_id ? delegateRegionsStatus.regional_delegate : delegateRegionsStatus.senior_delegate,\n        location: selectedGroup.name\n      }, function () {\n        sync();\n        setSelectedGroup(null);\n        setNewLeadDelegate(null);\n        setLoading(false);\n      }, {\n        method: 'POST'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, \"Save\")))));\n}","map":{"version":3,"names":["React","Button","ButtonGroup","Confirm","Form","Header","Icon","List","Modal","Table","useLoadedData","fetchUserGroupsUrl","addUserGroupsUrl","userGroupsUpdateUrl","apiV0Urls","delegateRegionsStatus","Errored","Loading","useSaveAction","WcaSearch","defaultRegion","name","group_type","parent_group_id","is_active","is_hidden","friendlyId","UserGroupVisibility","_ref","userGroup","save","sync","_React$useState","useState","_React$useState2","_slicedToArray","open","setOpen","iconName","createElement","Fragment","link","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","content","concat","onCancel","onConfirm","id","RegionManager","_this","_useLoadedData","data","fetchLoading","loading","error","_useSaveAction","saving","_React$useState3","_React$useState4","openModalType","setOpenModalType","_React$useState5","_React$useState6","newRegion","setNewRegion","_React$useState7","_React$useState8","saveError","setSaveError","_React$useState9","_React$useState10","selectedGroup","setSelectedGroup","_React$useState11","_React$useState12","newLeadDelegate","setNewLeadDelegate","_React$useState13","_React$useState14","setLoading","selectedGroupAndShowModal","group","closeModal","regions","useMemo","filter","subRegions","subRegionsList","Object","groupBy","as","celled","Row","HeaderCell","Body","map","region","_subRegions$region$id","key","Cell","lead_user","subRegion","disabled","size","onClose","Content","Dropdown","label","fluid","selection","value","onChange","e","_ref2","_objectSpread","options","text","Input","_ref3","_ref4","length","method","Field","control","_ref5","model","multiple","userRoles","create","userId","groupId","status","regional_delegate","senior_delegate","location"],"sources":["/app/WcaOnRails/app/webpacker/components/Panel/Board/RegionManager.jsx"],"sourcesContent":["import React from 'react';\nimport {\n  Button, ButtonGroup, Confirm, Form, Header, Icon, List, Modal, Table,\n} from 'semantic-ui-react';\nimport useLoadedData from '../../../lib/hooks/useLoadedData';\nimport {\n  fetchUserGroupsUrl, addUserGroupsUrl, userGroupsUpdateUrl, apiV0Urls,\n} from '../../../lib/requests/routes.js.erb';\nimport { delegateRegionsStatus } from '../../../lib/wca-data.js.erb';\nimport Errored from '../../Requests/Errored';\nimport Loading from '../../Requests/Loading';\nimport useSaveAction from '../../../lib/hooks/useSaveAction';\nimport WcaSearch from '../../SearchWidget/WcaSearch';\n\nconst defaultRegion = {\n  name: '',\n  group_type: 'delegate_regions',\n  parent_group_id: null,\n  is_active: true,\n  is_hidden: false,\n  friendlyId: '',\n};\n\nfunction UserGroupVisibility({ userGroup, save, sync }) {\n  const [open, setOpen] = React.useState(false);\n  const iconName = userGroup.is_active ? 'eye' : 'eye slash';\n  return (\n    <>\n      <List.Icon\n        name={iconName}\n        link\n        onClick={() => setOpen(true)}\n      />\n      <Confirm\n        open={open}\n        content={`Are you sure you want to ${userGroup.is_active ? 'deactivate' : 'activate'} ${userGroup.name}?`}\n        onCancel={() => setOpen(false)}\n        onConfirm={() => {\n          setOpen(false);\n          save(\n            userGroupsUpdateUrl(userGroup.id),\n            { is_active: !userGroup.is_active, is_hidden: userGroup.is_hidden },\n            sync,\n          );\n        }}\n      />\n    </>\n  );\n}\n\nexport default function RegionManager() {\n  const {\n    data, loading: fetchLoading, error, sync,\n  } = useLoadedData(fetchUserGroupsUrl('delegate_regions'));\n  const { save, saving } = useSaveAction();\n  const [openModalType, setOpenModalType] = React.useState();\n  const [newRegion, setNewRegion] = React.useState(defaultRegion);\n  const [saveError, setSaveError] = React.useState();\n  const [selectedGroup, setSelectedGroup] = React.useState();\n  const [newLeadDelegate, setNewLeadDelegate] = React.useState();\n  const [loading, setLoading] = React.useState(false);\n\n  const selectedGroupAndShowModal = (group) => {\n    setSelectedGroup(group);\n    setOpenModalType('newLeadDelegate');\n  };\n\n  const closeModal = () => setOpenModalType(null);\n\n  const regions = React.useMemo(() => data?.filter((group) => !group.parent_group_id), [data]);\n\n  const subRegions = React.useMemo(() => {\n    const subRegionsList = data?.filter((group) => group.parent_group_id) || [];\n    return Object.groupBy(subRegionsList, (group) => group.parent_group_id);\n  }, [data]);\n\n  if (loading || fetchLoading || saving) return <Loading />;\n  if (error || saveError) return <Errored />;\n\n  return (\n    <>\n      <Header as=\"h2\">Region Manager</Header>\n      <p>\n        Visibility: Whether the region is active & visible to the public or not.\n      </p>\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Region</Table.HeaderCell>\n            <Table.HeaderCell>Senior Delegate</Table.HeaderCell>\n            <Table.HeaderCell>Sub-Regions</Table.HeaderCell>\n            <Table.HeaderCell>Regional Delegate</Table.HeaderCell>\n            <Table.HeaderCell>Visibility</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {regions.map((region) => (\n            <>\n              <Table.Row key={region.id}>\n                <Table.Cell>\n                  {region.name}\n                </Table.Cell>\n                <Table.Cell>\n                  {region.lead_user\n                    ? (\n                      <>\n                        <Icon\n                          name=\"edit\"\n                          link\n                          onClick={() => selectedGroupAndShowModal(region)}\n                        />\n                        {region.lead_user.name}\n                      </>\n                    ) : (\n                      <Icon\n                        name=\"plus\"\n                        link\n                        onClick={() => selectedGroupAndShowModal(region)}\n                      />\n                    )}\n                </Table.Cell>\n                <Table.Cell />\n                <Table.Cell />\n                <Table.Cell>\n                  <UserGroupVisibility userGroup={region} save={save} sync={sync} />\n                </Table.Cell>\n              </Table.Row>\n              {subRegions[region.id]?.map((subRegion) => (\n                <Table.Row key={subRegion.id}>\n                  <Table.Cell />\n                  <Table.Cell />\n                  <Table.Cell>\n                    {subRegion.name}\n                  </Table.Cell>\n                  <Table.Cell>\n                    {subRegion.lead_user\n                      ? (\n                        <>\n                          <Icon\n                            name=\"edit\"\n                            link\n                            onClick={() => selectedGroupAndShowModal(subRegion)}\n                          />\n                          {subRegion.lead_user.name}\n                        </>\n                      ) : (\n                        <Icon\n                          name=\"plus\"\n                          link\n                          onClick={() => selectedGroupAndShowModal(subRegion)}\n                        />\n                      )}\n                  </Table.Cell>\n                  <Table.Cell>\n                    <UserGroupVisibility userGroup={subRegion} save={save} sync={sync} />\n                  </Table.Cell>\n                </Table.Row>\n              ))}\n            </>\n          ))}\n        </Table.Body>\n      </Table>\n      <ButtonGroup>\n        <Button\n          onClick={() => setOpenModalType('newRegion')}\n          disabled={saving}\n        >\n          Add new region\n        </Button>\n        <Button\n          onClick={() => setOpenModalType('newSubregion')}\n          disabled={saving}\n        >\n          Add new subregion\n        </Button>\n      </ButtonGroup>\n      <Modal\n        size=\"fullscreen\"\n        onClose={() => {\n          closeModal();\n          setNewRegion(defaultRegion);\n        }}\n        open={openModalType === 'newRegion' || openModalType === 'newSubregion'}\n      >\n        <Modal.Content>\n          <Form>\n            {openModalType === 'newSubregion' && (\n              <Form.Dropdown\n                label=\"Parent region\"\n                fluid\n                selection\n                value={newRegion.parent_group_id}\n                onChange={(e, { value }) => setNewRegion({ ...newRegion, parent_group_id: value })}\n                options={regions.map((region) => ({\n                  key: region.id,\n                  text: region.name,\n                  value: region.id,\n                }))}\n              />\n            )}\n            <Form.Input\n              label=\"Name\"\n              value={newRegion.name}\n              onChange={(e, { value }) => setNewRegion({ ...newRegion, name: value })}\n            />\n            <Form.Input\n              label=\"Friendly ID\"\n              value={newRegion.friendlyId}\n              onChange={(e, { value }) => setNewRegion({ ...newRegion, friendlyId: value })}\n            />\n            <Form.Button\n              onClick={() => {\n                closeModal();\n                setNewRegion(defaultRegion);\n              }}\n            >\n              Cancel\n            </Form.Button>\n            <Form.Button\n              disabled={\n                newRegion.name.length === 0\n                || (openModalType === 'newSubregion' && !newRegion.parent_group_id)\n              }\n              onClick={() => {\n                closeModal();\n                save(addUserGroupsUrl, newRegion, () => sync(), { method: 'POST' }, setSaveError);\n                setNewRegion(defaultRegion);\n              }}\n            >\n              Save\n            </Form.Button>\n          </Form>\n        </Modal.Content>\n      </Modal>\n      <Modal\n        onClose={() => {\n          closeModal();\n          setSelectedGroup(null);\n          setNewLeadDelegate(null);\n        }}\n        open={openModalType === 'newLeadDelegate'}\n      >\n        <Modal.Content>\n          <Form>\n            <Form.Field\n              label=\"New Lead Delegate\"\n              control={WcaSearch}\n              value={newLeadDelegate}\n              onChange={(e, { value }) => setNewLeadDelegate(value)}\n              model=\"user\"\n              multiple={false}\n            />\n            <Form.Button onClick={() => {\n              closeModal();\n              setSelectedGroup(null);\n              setNewLeadDelegate(null);\n            }}\n            >\n              Cancel\n            </Form.Button>\n            <Form.Button\n              disabled={!newLeadDelegate}\n              onClick={() => {\n                closeModal();\n                setLoading(true);\n                save(\n                  apiV0Urls.userRoles.create(),\n                  {\n                    userId: newLeadDelegate.id,\n                    groupId: selectedGroup.id,\n                    status: (selectedGroup.parent_group_id\n                      ? delegateRegionsStatus.regional_delegate\n                      : delegateRegionsStatus.senior_delegate),\n                    location: selectedGroup.name,\n                  },\n                  () => {\n                    sync();\n                    setSelectedGroup(null);\n                    setNewLeadDelegate(null);\n                    setLoading(false);\n                  },\n                  { method: 'POST' },\n                );\n              }}\n            >\n              Save\n            </Form.Button>\n          </Form>\n        </Modal.Content>\n      </Modal>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}