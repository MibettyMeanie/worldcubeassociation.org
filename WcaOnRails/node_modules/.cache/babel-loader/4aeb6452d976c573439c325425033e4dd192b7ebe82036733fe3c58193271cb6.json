{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/index.js\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { Button, Container, Divider, Form, Grid, Icon, List, Message, Popup, Ref, Segment, Sticky } from 'semantic-ui-react';\nimport FullCalendar from '@fullcalendar/react';\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport luxonPlugin, { toLuxonDateTime, toLuxonDuration } from '@fullcalendar/luxon3';\nimport { useDispatch, useStore } from \"../../../lib/providers/StoreProvider\";\nimport { useConfirm } from \"../../../lib/providers/ConfirmProvider\";\nimport useInputState from \"../../../lib/hooks/useInputState\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { getMatchingActivities, roomWcifFromId, venueWcifFromRoomId } from \"../../../lib/utils/wcif\";\nimport { getTextColor } from \"../../../lib/utils/calendar\";\nimport useCheckboxState from \"../../../lib/hooks/useCheckboxState\";\nimport { addActivity, editActivity, moveActivity, removeActivity, scaleActivity } from \"../store/actions\";\nimport { friendlyTimezoneName } from \"../../../lib/wca-data.js.erb\";\nimport { defaultDurationFromActivityCode, fcEventToActivityAndDates, luxonToWcifIso } from \"../../../lib/utils/edit-schedule\";\nimport EditActivityModal from \"./EditActivityModal\";\nimport ActionsHeader from \"./ActionsHeader\";\nfunction EditActivities(_ref) {\n  var _this = this;\n  var wcifEvents = _ref.wcifEvents,\n    calendarLocale = _ref.calendarLocale;\n  var _useStore = useStore(),\n    wcifSchedule = _useStore.wcifSchedule;\n  var dispatch = useDispatch();\n  var confirm = useConfirm();\n  var _useInputState = useInputState(),\n    _useInputState2 = _slicedToArray(_useInputState, 2),\n    selectedRoomId = _useInputState2[0],\n    setSelectedRoomId = _useInputState2[1];\n  var _useCheckboxState = useCheckboxState(false),\n    _useCheckboxState2 = _slicedToArray(_useCheckboxState, 2),\n    shouldUpdateMatches = _useCheckboxState2[0],\n    setShouldUpdateMatches = _useCheckboxState2[1];\n  var _useInputState3 = useInputState(15),\n    _useInputState4 = _slicedToArray(_useInputState3, 2),\n    minutesPerRow = _useInputState4[0],\n    setMinutesPerRow = _useInputState4[1];\n  var _useInputState5 = useInputState(8),\n    _useInputState6 = _slicedToArray(_useInputState5, 2),\n    calendarStart = _useInputState6[0],\n    setCalendarStart = _useInputState6[1];\n  var _useInputState7 = useInputState(20),\n    _useInputState8 = _slicedToArray(_useInputState7, 2),\n    calendarEnd = _useInputState8[0],\n    setCalendarEnd = _useInputState8[1];\n\n  // This part is ugly because Semantic-UI and Fullcalendar disagree\n  //   about how modals should be handled.\n  // According to Semantic-UI, modals are \"always there\" in the DOM,\n  //   just that their \"isOpen\" state is false most of the time.\n  //   So they simply don't show but they are already part of the DOM tree.\n  // The (click-)event-based model of Fullcalendar however dictates that\n  //   we can only \"instantiate\" a modal once the user actually clicks somewhere on the calendar.\n  //   So we pre-fill the modal with empty state and set it accordingly on every event click.\n  // If somebody has a better idea how to handle this, please shout.\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isActivityModalOpen = _useState2[0],\n    setActivityModalOpen = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    modalActivity = _useState4[0],\n    setModalActivity = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    modalLuxonStart = _useState6[0],\n    setModalLuxonStart = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    modalLuxonEnd = _useState8[0],\n    setModalLuxonEnd = _useState8[1];\n  // ------ MODAL HACK END ------\n\n  var fcSlotDuration = useMemo(function () {\n    return \"00:\".concat(minutesPerRow.toString().padStart(2, '0'), \":00\");\n  }, [minutesPerRow]);\n  var fcSlotMin = useMemo(function () {\n    return \"\".concat(calendarStart.toString().padStart(2, '0'), \":00:00\");\n  }, [calendarStart]);\n  var fcSlotMax = useMemo(function () {\n    return \"\".concat(calendarEnd.toString().padStart(2, '0'), \":00:00\");\n  }, [calendarEnd]);\n  var wcifVenue = useMemo(function () {\n    return venueWcifFromRoomId(wcifSchedule, selectedRoomId);\n  }, [selectedRoomId, wcifSchedule]);\n  var wcifRoom = useMemo(function () {\n    return roomWcifFromId(wcifSchedule, selectedRoomId);\n  }, [selectedRoomId, wcifSchedule]);\n  var fcActivities = useMemo(function () {\n    return wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.activities.map(function (activity) {\n      var matchCount = getMatchingActivities(wcifSchedule, activity).length - 1;\n      var matchesText = \" (\".concat(matchCount, \" matching activit\").concat(matchCount === 1 ? 'y' : 'ies', \")\");\n      return {\n        title: activity.name + (shouldUpdateMatches && matchCount > 0 ? matchesText : ''),\n        start: activity.startTime,\n        end: activity.endTime,\n        extendedProps: {\n          activityId: activity.id,\n          activityCode: activity.activityCode,\n          activityName: activity.name,\n          childActivities: activity.childActivities,\n          matchCount: matchCount\n        }\n      };\n    });\n  }, [wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.activities, wcifSchedule, shouldUpdateMatches]);\n\n  // we 'fake' our own ref due to quirks in useRef + useEffect combinations.\n  // See https://medium.com/@teh_builder/ref-objects-inside-useeffect-hooks-eb7c15198780\n  var activityPickerRef = useCallback(function (node) {\n    if (!node) return;\n\n    // eslint-disable-next-line no-new\n    new Draggable(node, {\n      itemSelector: '.fc-draggable',\n      eventData: function eventData(eventEl) {\n        var activityCode = eventEl.getAttribute('wcif-ac');\n        var activityName = eventEl.getAttribute('wcif-title');\n        var defaultDuration = defaultDurationFromActivityCode(activityCode);\n        return {\n          title: activityName,\n          duration: \"00:\".concat(defaultDuration.toString().padStart(2, '0'), \":00\"),\n          extendedProps: {\n            activityCode: activityCode,\n            activityName: activityName\n          }\n        };\n      }\n    });\n  }, []);\n  var dropToDeleteRef = useRef(null);\n  var removeIfOverDropzone = function removeIfOverDropzone(_ref2) {\n    var fcEvent = _ref2.event,\n      jsEvent = _ref2.jsEvent;\n    if (!dropToDeleteRef.current) return;\n    var elem = dropToDeleteRef.current;\n    var rect = elem.getBoundingClientRect();\n    var top = rect.top + window.scrollY;\n    var bottom = rect.bottom + window.scrollY;\n    var left = rect.left + window.scrollX;\n    var right = rect.right + window.scrollX;\n    if (jsEvent.pageX >= left && jsEvent.pageX <= right && jsEvent.pageY >= top && jsEvent.pageY <= bottom) {\n      var _fcEvent$extendedProp = fcEvent.extendedProps,\n        activityId = _fcEvent$extendedProp.activityId,\n        activityName = _fcEvent$extendedProp.activityName,\n        matchCount = _fcEvent$extendedProp.matchCount;\n      var matchText = \"all \".concat(matchCount + 1, \" copies of \");\n      confirm({\n        content: \"Are you sure you want to delete \".concat(shouldUpdateMatches && matchCount > 1 ? matchText : '', \"the event \").concat(activityName, \"? THIS ACTION CANNOT BE UNDONE!\")\n      }).then(function () {\n        dispatch(removeActivity(activityId, shouldUpdateMatches));\n      });\n    }\n  };\n  var addActivityFromPicker = function addActivityFromPicker(_ref3) {\n    var fcEvent = _ref3.event,\n      calendar = _ref3.view.calendar;\n    var _fcEventToActivityAnd = fcEventToActivityAndDates(fcEvent, calendar),\n      activity = _fcEventToActivityAnd.activity;\n    dispatch(addActivity(activity, wcifRoom.id));\n  };\n  var changeActivityTimeslot = function changeActivityTimeslot(_ref4) {\n    var fcEvent = _ref4.event,\n      delta = _ref4.delta,\n      calendar = _ref4.view.calendar;\n    var activityId = fcEvent.extendedProps.activityId;\n    var duration = toLuxonDuration(delta, calendar);\n    var deltaIso = duration.toISO();\n    dispatch(moveActivity(activityId, deltaIso, shouldUpdateMatches));\n  };\n  var resizeActivity = function resizeActivity(_ref5) {\n    var fcEvent = _ref5.event,\n      startDelta = _ref5.startDelta,\n      endDelta = _ref5.endDelta,\n      calendar = _ref5.view.calendar;\n    var activityId = fcEvent.extendedProps.activityId;\n    var startScaleDuration = toLuxonDuration(startDelta, calendar);\n    var startScaleIso = startScaleDuration.toISO();\n    var endScaleDuration = toLuxonDuration(endDelta, calendar);\n    var endScaleIso = endScaleDuration.toISO();\n    dispatch(scaleActivity(activityId, startScaleIso, endScaleIso, shouldUpdateMatches));\n  };\n  var addActivityFromCalendar = function addActivityFromCalendar(startLuxon, endLuxon) {\n    setModalLuxonStart(startLuxon);\n    setModalLuxonEnd(endLuxon);\n    setActivityModalOpen(true);\n  };\n  var addActivityFromCalendarClick = function addActivityFromCalendarClick(_ref6) {\n    var date = _ref6.date,\n      calendar = _ref6.view.calendar;\n    var eventStartLuxon = toLuxonDateTime(date, calendar);\n    var eventEndLuxon = eventStartLuxon.plus({\n      minutes: defaultDurationFromActivityCode('other')\n    });\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n  var addActivityFromCalendarDrag = function addActivityFromCalendarDrag(_ref7) {\n    var start = _ref7.start,\n      end = _ref7.end,\n      calendar = _ref7.view.calendar;\n    var eventStartLuxon = toLuxonDateTime(start, calendar);\n    var eventEndLuxon = toLuxonDateTime(end, calendar);\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n  var editCustomEvent = function editCustomEvent(_ref8) {\n    var fcEvent = _ref8.event,\n      calendar = _ref8.view.calendar;\n    var _fcEventToActivityAnd2 = fcEventToActivityAndDates(fcEvent, calendar),\n      activity = _fcEventToActivityAnd2.activity,\n      startLuxon = _fcEventToActivityAnd2.startLuxon,\n      endLuxon = _fcEventToActivityAnd2.endLuxon;\n    var canEdit = activity.activityCode.startsWith('other-');\n    if (canEdit) {\n      setModalActivity(activity);\n      setModalLuxonStart(startLuxon);\n      setModalLuxonEnd(endLuxon);\n      setActivityModalOpen(true);\n    }\n  };\n  var onActivityModalClose = function onActivityModalClose(ok, modalData) {\n    setActivityModalOpen(false);\n    var activityCode = modalData.activityCode,\n      activityName = modalData.activityName;\n    if (ok) {\n      if (modalActivity) {\n        dispatch(editActivity(modalActivity.id, 'activityCode', activityCode, shouldUpdateMatches));\n        dispatch(editActivity(modalActivity.id, 'name', activityName, shouldUpdateMatches));\n      } else {\n        var utcStartIso = luxonToWcifIso(modalLuxonStart);\n        var utcEndIso = luxonToWcifIso(modalLuxonEnd);\n        var activity = {\n          name: activityName,\n          activityCode: activityCode,\n          startTime: utcStartIso,\n          endTime: utcEndIso,\n          childActivities: []\n        };\n        dispatch(addActivity(activity, wcifRoom.id));\n      }\n    }\n\n    // cleanup.\n    setModalActivity(null);\n    setModalLuxonStart(null);\n    setModalLuxonEnd(null);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"schedules-edit-panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    textAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    horizontal: true,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, wcifSchedule.venues.map(function (venue) {\n    return /*#__PURE__*/React.createElement(List.Item, {\n      key: venue.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"home\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(List.Content, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(List.Header, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }\n    }, venue.name), /*#__PURE__*/React.createElement(List.List, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }\n    }, venue.rooms.map(function (room) {\n      return /*#__PURE__*/React.createElement(List.Item, {\n        key: room.id,\n        as: \"a\",\n        onClick: function onClick() {\n          return setSelectedRoomId(room.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }\n      }, room.id === (wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.id) ? /*#__PURE__*/React.createElement(\"b\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 51\n        }\n      }, room.name) : room.name);\n    }))));\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }), selectedRoomId === undefined && /*#__PURE__*/React.createElement(Message, {\n    info: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, \"Please select a room by clicking one of the labels above\"), selectedRoomId !== undefined && /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(EditActivityModal, {\n    isModalOpen: isActivityModalOpen,\n    activity: modalActivity,\n    startLuxon: modalLuxonStart,\n    endLuxon: modalLuxonEnd,\n    dateLocale: calendarLocale,\n    onModalClose: onActivityModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ActionsHeader, {\n    selectedRoomId: selectedRoomId,\n    shouldUpdateMatches: shouldUpdateMatches,\n    setShouldUpdateMatches: setShouldUpdateMatches,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Sticky, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Segment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ActivityPicker, {\n    wcifEvents: wcifEvents,\n    wcifRoom: wcifRoom,\n    listRef: activityPickerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    text: true,\n    textAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 17\n    }\n  }, \"The timezone for this room is\", ' ', /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 19\n    }\n  }, friendlyTimezoneName(wcifVenue.timezone))), /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Popup, {\n    trigger: /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: \"cog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 34\n      }\n    }),\n    on: \"click\",\n    position: \"right center\",\n    pinned: true,\n    flowing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Popup.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 25\n    }\n  }, \"Calendar settings\"), /*#__PURE__*/React.createElement(Popup.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Minutes per row\",\n    name: \"row-mins\",\n    type: \"number\",\n    min: 5,\n    max: 30,\n    step: 5,\n    value: minutesPerRow,\n    onChange: setMinutesPerRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Calendar starts at\",\n    name: \"cal-start\",\n    type: \"number\",\n    min: 0,\n    max: 24,\n    value: calendarStart,\n    onChange: setCalendarStart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Calendar ends at\",\n    name: \"cal-end\",\n    type: \"number\",\n    min: 0,\n    max: 24,\n    value: calendarEnd,\n    onChange: setCalendarEnd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Ref, {\n    innerRef: dropToDeleteRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Message, {\n    negative: true,\n    floating: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 27\n    }\n  }), \"Drop an event here to remove it from the schedule.\", /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 27\n    }\n  })))))), /*#__PURE__*/React.createElement(FullCalendar\n  // plugins for the basic FullCalendar implementation.\n  //   - timeGridPlugin: Display days as vertical grid\n  //   - luxonPlugin: Support timezones\n  //   - interactionPlugin: Support dragging events from the sidebar\n  , {\n    plugins: [timeGridPlugin, luxonPlugin, interactionPlugin]\n    // define our \"own\" view (which is basically just saying how many days we want)\n    ,\n    initialView: \"agendaForComp\",\n    views: {\n      agendaForComp: {\n        type: 'timeGrid',\n        duration: {\n          days: wcifSchedule.numberOfDays\n        }\n      }\n    },\n    initialDate: wcifSchedule.startDate\n    // by default, FC offers support for separate \"whole-day\" events\n    ,\n    allDaySlot: false\n    // by default, FC would show a \"skip to next day\" toolbar\n    ,\n    headerToolbar: false\n    // the next three values can be configured via a popup menu\n    ,\n    slotMinTime: fcSlotMin,\n    slotMaxTime: fcSlotMax,\n    slotDuration: fcSlotDuration\n    // force FC to automagically compute an event's \"end\" flag,\n    //   if the event doesn't specify one itself\n    ,\n    forceEventDuration: true,\n    defaultTimedEventDuration: \"00:30:00\"\n    // no debuf when an event drag was cancelled\n    ,\n    dragRevertDuration: 0\n    // make it so that the user's mouse must travel some non-zero distance\n    //   until any \"drag\" event is triggered\n    ,\n    selectMinDistance: 5,\n    height: \"auto\"\n    // intervals in which the events \"snap\" to the calendar grid\n    ,\n    snapDuration: \"00:05:00\"\n    // display color for background + text\n    ,\n    eventColor: wcifRoom.color,\n    eventTextColor: getTextColor(wcifRoom.color)\n    // localization settings\n    ,\n    locale: calendarLocale,\n    timeZone: wcifVenue.timezone\n    // FIRE IN DA HOLE!\n    ,\n    events: fcActivities\n    // make the calendar editable\n    ,\n    editable: true,\n    eventDragStop: removeIfOverDropzone\n    // allow moving events as a whole around\n    ,\n    eventStartEditable: true,\n    eventDrop: changeActivityTimeslot\n    // allow resizing events, and explicitly allow resizing on both ends\n    ,\n    eventDurationEditable: true,\n    eventResizableFromStart: true,\n    eventResize: resizeActivity\n    // allow dropping external events onto the schedule\n    ,\n    droppable: true,\n    eventReceive: addActivityFromPicker\n    // allow highlighting an (empty) timeslot with your mouse to create a new event\n    ,\n    selectable: true,\n    dateClick: addActivityFromCalendarClick,\n    select: addActivityFromCalendarDrag\n    // allow clicking on existing events to edit them\n    ,\n    eventClick: editCustomEvent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 17\n    }\n  }))))));\n}\nexport default EditActivities;","map":{"version":3,"names":["React","useCallback","useMemo","useRef","useState","Button","Container","Divider","Form","Grid","Icon","List","Message","Popup","Ref","Segment","Sticky","FullCalendar","interactionPlugin","Draggable","timeGridPlugin","luxonPlugin","toLuxonDateTime","toLuxonDuration","useDispatch","useStore","useConfirm","useInputState","ActivityPicker","getMatchingActivities","roomWcifFromId","venueWcifFromRoomId","getTextColor","useCheckboxState","addActivity","editActivity","moveActivity","removeActivity","scaleActivity","friendlyTimezoneName","defaultDurationFromActivityCode","fcEventToActivityAndDates","luxonToWcifIso","EditActivityModal","ActionsHeader","EditActivities","_ref","_this","wcifEvents","calendarLocale","_useStore","wcifSchedule","dispatch","confirm","_useInputState","_useInputState2","_slicedToArray","selectedRoomId","setSelectedRoomId","_useCheckboxState","_useCheckboxState2","shouldUpdateMatches","setShouldUpdateMatches","_useInputState3","_useInputState4","minutesPerRow","setMinutesPerRow","_useInputState5","_useInputState6","calendarStart","setCalendarStart","_useInputState7","_useInputState8","calendarEnd","setCalendarEnd","_useState","_useState2","isActivityModalOpen","setActivityModalOpen","_useState3","_useState4","modalActivity","setModalActivity","_useState5","_useState6","modalLuxonStart","setModalLuxonStart","_useState7","_useState8","modalLuxonEnd","setModalLuxonEnd","fcSlotDuration","concat","toString","padStart","fcSlotMin","fcSlotMax","wcifVenue","wcifRoom","fcActivities","activities","map","activity","matchCount","length","matchesText","title","name","start","startTime","end","endTime","extendedProps","activityId","id","activityCode","activityName","childActivities","activityPickerRef","node","itemSelector","eventData","eventEl","getAttribute","defaultDuration","duration","dropToDeleteRef","removeIfOverDropzone","_ref2","fcEvent","event","jsEvent","current","elem","rect","getBoundingClientRect","top","window","scrollY","bottom","left","scrollX","right","pageX","pageY","_fcEvent$extendedProp","matchText","content","then","addActivityFromPicker","_ref3","calendar","view","_fcEventToActivityAnd","changeActivityTimeslot","_ref4","delta","deltaIso","toISO","resizeActivity","_ref5","startDelta","endDelta","startScaleDuration","startScaleIso","endScaleDuration","endScaleIso","addActivityFromCalendar","startLuxon","endLuxon","addActivityFromCalendarClick","_ref6","date","eventStartLuxon","eventEndLuxon","plus","minutes","addActivityFromCalendarDrag","_ref7","editCustomEvent","_ref8","_fcEventToActivityAnd2","canEdit","startsWith","onActivityModalClose","ok","modalData","utcStartIso","utcEndIso","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","horizontal","size","venues","venue","Item","key","Content","Header","rooms","room","as","onClick","undefined","info","fluid","isModalOpen","dateLocale","onModalClose","Row","Column","width","listRef","text","timezone","verticalAlign","trigger","secondary","icon","on","position","pinned","flowing","Input","label","type","min","max","step","value","onChange","innerRef","negative","floating","plugins","initialView","views","agendaForComp","days","numberOfDays","initialDate","startDate","allDaySlot","headerToolbar","slotMinTime","slotMaxTime","slotDuration","forceEventDuration","defaultTimedEventDuration","dragRevertDuration","selectMinDistance","height","snapDuration","eventColor","color","eventTextColor","locale","timeZone","events","editable","eventDragStop","eventStartEditable","eventDrop","eventDurationEditable","eventResizableFromStart","eventResize","droppable","eventReceive","selectable","dateClick","select","eventClick"],"sources":["/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/index.js"],"sourcesContent":["import React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport {\n  Button,\n  Container,\n  Divider,\n  Form,\n  Grid,\n  Icon, List,\n  Message,\n  Popup, Ref, Segment,\n  Sticky,\n} from 'semantic-ui-react';\n\nimport FullCalendar from '@fullcalendar/react';\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport luxonPlugin, { toLuxonDateTime, toLuxonDuration } from '@fullcalendar/luxon3';\n\nimport { useDispatch, useStore } from '../../../lib/providers/StoreProvider';\nimport { useConfirm } from '../../../lib/providers/ConfirmProvider';\nimport useInputState from '../../../lib/hooks/useInputState';\nimport ActivityPicker from './ActivityPicker';\nimport { getMatchingActivities, roomWcifFromId, venueWcifFromRoomId } from '../../../lib/utils/wcif';\nimport { getTextColor } from '../../../lib/utils/calendar';\nimport useCheckboxState from '../../../lib/hooks/useCheckboxState';\n\nimport {\n  addActivity,\n  editActivity,\n  moveActivity,\n  removeActivity,\n  scaleActivity,\n} from '../store/actions';\n\nimport { friendlyTimezoneName } from '../../../lib/wca-data.js.erb';\nimport {\n  defaultDurationFromActivityCode,\n  fcEventToActivityAndDates,\n  luxonToWcifIso,\n} from '../../../lib/utils/edit-schedule';\nimport EditActivityModal from './EditActivityModal';\nimport ActionsHeader from './ActionsHeader';\n\nfunction EditActivities({\n  wcifEvents,\n  calendarLocale,\n}) {\n  const { wcifSchedule } = useStore();\n  const dispatch = useDispatch();\n\n  const confirm = useConfirm();\n\n  const [selectedRoomId, setSelectedRoomId] = useInputState();\n\n  const [shouldUpdateMatches, setShouldUpdateMatches] = useCheckboxState(false);\n\n  const [minutesPerRow, setMinutesPerRow] = useInputState(15);\n  const [calendarStart, setCalendarStart] = useInputState(8);\n  const [calendarEnd, setCalendarEnd] = useInputState(20);\n\n  // This part is ugly because Semantic-UI and Fullcalendar disagree\n  //   about how modals should be handled.\n  // According to Semantic-UI, modals are \"always there\" in the DOM,\n  //   just that their \"isOpen\" state is false most of the time.\n  //   So they simply don't show but they are already part of the DOM tree.\n  // The (click-)event-based model of Fullcalendar however dictates that\n  //   we can only \"instantiate\" a modal once the user actually clicks somewhere on the calendar.\n  //   So we pre-fill the modal with empty state and set it accordingly on every event click.\n  // If somebody has a better idea how to handle this, please shout.\n  const [isActivityModalOpen, setActivityModalOpen] = useState(false);\n\n  const [modalActivity, setModalActivity] = useState();\n\n  const [modalLuxonStart, setModalLuxonStart] = useState();\n  const [modalLuxonEnd, setModalLuxonEnd] = useState();\n  // ------ MODAL HACK END ------\n\n  const fcSlotDuration = useMemo(() => `00:${minutesPerRow.toString().padStart(2, '0')}:00`, [minutesPerRow]);\n\n  const fcSlotMin = useMemo(() => `${calendarStart.toString().padStart(2, '0')}:00:00`, [calendarStart]);\n  const fcSlotMax = useMemo(() => `${calendarEnd.toString().padStart(2, '0')}:00:00`, [calendarEnd]);\n\n  const wcifVenue = useMemo(\n    () => venueWcifFromRoomId(wcifSchedule, selectedRoomId),\n    [selectedRoomId, wcifSchedule],\n  );\n\n  const wcifRoom = useMemo(\n    () => roomWcifFromId(wcifSchedule, selectedRoomId),\n    [selectedRoomId, wcifSchedule],\n  );\n\n  const fcActivities = useMemo(() => (\n    wcifRoom?.activities.map((activity) => {\n      const matchCount = getMatchingActivities(wcifSchedule, activity).length - 1;\n      const matchesText = ` (${matchCount} matching activit${matchCount === 1 ? 'y' : 'ies'})`;\n\n      return {\n        title: activity.name + (shouldUpdateMatches && matchCount > 0 ? matchesText : ''),\n        start: activity.startTime,\n        end: activity.endTime,\n        extendedProps: {\n          activityId: activity.id,\n          activityCode: activity.activityCode,\n          activityName: activity.name,\n          childActivities: activity.childActivities,\n          matchCount,\n        },\n      };\n    })\n  ), [wcifRoom?.activities, wcifSchedule, shouldUpdateMatches]);\n\n  // we 'fake' our own ref due to quirks in useRef + useEffect combinations.\n  // See https://medium.com/@teh_builder/ref-objects-inside-useeffect-hooks-eb7c15198780\n  const activityPickerRef = useCallback((node) => {\n    if (!node) return;\n\n    // eslint-disable-next-line no-new\n    new Draggable(node, {\n      itemSelector: '.fc-draggable',\n      eventData: (eventEl) => {\n        const activityCode = eventEl.getAttribute('wcif-ac');\n        const activityName = eventEl.getAttribute('wcif-title');\n        const defaultDuration = defaultDurationFromActivityCode(activityCode);\n\n        return {\n          title: activityName,\n          duration: `00:${defaultDuration.toString().padStart(2, '0')}:00`,\n          extendedProps: {\n            activityCode,\n            activityName,\n          },\n        };\n      },\n    });\n  }, []);\n\n  const dropToDeleteRef = useRef(null);\n\n  const removeIfOverDropzone = ({ event: fcEvent, jsEvent }) => {\n    if (!dropToDeleteRef.current) return;\n\n    const elem = dropToDeleteRef.current;\n    const rect = elem.getBoundingClientRect();\n\n    const top = rect.top + window.scrollY;\n    const bottom = rect.bottom + window.scrollY;\n    const left = rect.left + window.scrollX;\n    const right = rect.right + window.scrollX;\n\n    if (\n      jsEvent.pageX >= left\n        && jsEvent.pageX <= right\n        && jsEvent.pageY >= top\n        && jsEvent.pageY <= bottom\n    ) {\n      const { activityId, activityName, matchCount } = fcEvent.extendedProps;\n      const matchText = `all ${matchCount + 1} copies of `;\n      confirm({\n        content: `Are you sure you want to delete ${shouldUpdateMatches && matchCount > 1 ? matchText : ''}the event ${activityName}? THIS ACTION CANNOT BE UNDONE!`,\n      }).then(() => {\n        dispatch(removeActivity(activityId, shouldUpdateMatches));\n      });\n    }\n  };\n\n  const addActivityFromPicker = ({ event: fcEvent, view: { calendar } }) => {\n    const { activity } = fcEventToActivityAndDates(fcEvent, calendar);\n\n    dispatch(addActivity(activity, wcifRoom.id));\n  };\n\n  const changeActivityTimeslot = ({\n    event: fcEvent,\n    delta,\n    view: { calendar },\n  }) => {\n    const { activityId } = fcEvent.extendedProps;\n\n    const duration = toLuxonDuration(delta, calendar);\n    const deltaIso = duration.toISO();\n\n    dispatch(moveActivity(activityId, deltaIso, shouldUpdateMatches));\n  };\n\n  const resizeActivity = ({\n    event: fcEvent,\n    startDelta,\n    endDelta,\n    view: { calendar },\n  }) => {\n    const { activityId } = fcEvent.extendedProps;\n\n    const startScaleDuration = toLuxonDuration(startDelta, calendar);\n    const startScaleIso = startScaleDuration.toISO();\n\n    const endScaleDuration = toLuxonDuration(endDelta, calendar);\n    const endScaleIso = endScaleDuration.toISO();\n\n    dispatch(scaleActivity(activityId, startScaleIso, endScaleIso, shouldUpdateMatches));\n  };\n\n  const addActivityFromCalendar = (startLuxon, endLuxon) => {\n    setModalLuxonStart(startLuxon);\n    setModalLuxonEnd(endLuxon);\n\n    setActivityModalOpen(true);\n  };\n\n  const addActivityFromCalendarClick = ({ date, view: { calendar } }) => {\n    const eventStartLuxon = toLuxonDateTime(date, calendar);\n    const eventEndLuxon = eventStartLuxon.plus({ minutes: defaultDurationFromActivityCode('other') });\n\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n\n  const addActivityFromCalendarDrag = ({ start, end, view: { calendar } }) => {\n    const eventStartLuxon = toLuxonDateTime(start, calendar);\n    const eventEndLuxon = toLuxonDateTime(end, calendar);\n\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n\n  const editCustomEvent = ({ event: fcEvent, view: { calendar } }) => {\n    const {\n      activity,\n      startLuxon,\n      endLuxon,\n    } = fcEventToActivityAndDates(fcEvent, calendar);\n\n    const canEdit = activity.activityCode.startsWith('other-');\n\n    if (canEdit) {\n      setModalActivity(activity);\n\n      setModalLuxonStart(startLuxon);\n      setModalLuxonEnd(endLuxon);\n\n      setActivityModalOpen(true);\n    }\n  };\n\n  const onActivityModalClose = (ok, modalData) => {\n    setActivityModalOpen(false);\n\n    const { activityCode, activityName } = modalData;\n\n    if (ok) {\n      if (modalActivity) {\n        dispatch(editActivity(modalActivity.id, 'activityCode', activityCode, shouldUpdateMatches));\n        dispatch(editActivity(modalActivity.id, 'name', activityName, shouldUpdateMatches));\n      } else {\n        const utcStartIso = luxonToWcifIso(modalLuxonStart);\n        const utcEndIso = luxonToWcifIso(modalLuxonEnd);\n\n        const activity = {\n          name: activityName,\n          activityCode,\n          startTime: utcStartIso,\n          endTime: utcEndIso,\n          childActivities: [],\n        };\n\n        dispatch(addActivity(activity, wcifRoom.id));\n      }\n    }\n\n    // cleanup.\n    setModalActivity(null);\n\n    setModalLuxonStart(null);\n    setModalLuxonEnd(null);\n  };\n\n  return (\n    <div id=\"schedules-edit-panel-body\">\n      <Container textAlign=\"center\">\n        <List horizontal size=\"large\">\n          {wcifSchedule.venues.map((venue) => (\n            <List.Item key={venue.id}>\n              <Icon name=\"home\" />\n              <List.Content>\n                <List.Header>{venue.name}</List.Header>\n                <List.List>\n                  {venue.rooms.map((room) => (\n                    <List.Item\n                      key={room.id}\n                      as=\"a\"\n                      onClick={() => setSelectedRoomId(room.id)}\n                    >\n                      {room.id === wcifRoom?.id ? <b>{room.name}</b> : room.name}\n                    </List.Item>\n                  ))}\n                </List.List>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      </Container>\n      <Divider />\n      {selectedRoomId === undefined && (\n        <Message info>Please select a room by clicking one of the labels above</Message>\n      )}\n      {selectedRoomId !== undefined && (\n        <Container fluid>\n          <EditActivityModal\n            isModalOpen={isActivityModalOpen}\n            activity={modalActivity}\n            startLuxon={modalLuxonStart}\n            endLuxon={modalLuxonEnd}\n            dateLocale={calendarLocale}\n            onModalClose={onActivityModalClose}\n          />\n          <ActionsHeader\n            selectedRoomId={selectedRoomId}\n            shouldUpdateMatches={shouldUpdateMatches}\n            setShouldUpdateMatches={setShouldUpdateMatches}\n          />\n          <Grid>\n            <Grid.Row>\n              <Grid.Column width={4}>\n                <Sticky>\n                  <Segment>\n                    <ActivityPicker\n                      wcifEvents={wcifEvents}\n                      wcifRoom={wcifRoom}\n                      listRef={activityPickerRef}\n                    />\n                  </Segment>\n                </Sticky>\n              </Grid.Column>\n              <Grid.Column width={12}>\n                <Container text textAlign=\"center\">\n                  The timezone for this room is\n                  {' '}\n                  <b>{friendlyTimezoneName(wcifVenue.timezone)}</b>\n                </Container>\n                <Container fluid>\n                  <Grid textAlign=\"center\" verticalAlign=\"middle\">\n                    <Grid.Column width={1}>\n                      <Popup\n                        trigger={<Button secondary icon=\"cog\" />}\n                        on=\"click\"\n                        position=\"right center\"\n                        pinned\n                        flowing\n                      >\n                        <Popup.Header>Calendar settings</Popup.Header>\n                        <Popup.Content>\n                          <Form>\n                            <Form.Input\n                              label=\"Minutes per row\"\n                              name=\"row-mins\"\n                              type=\"number\"\n                              min={5}\n                              max={30}\n                              step={5}\n                              value={minutesPerRow}\n                              onChange={setMinutesPerRow}\n                            />\n                            <Form.Input\n                              label=\"Calendar starts at\"\n                              name=\"cal-start\"\n                              type=\"number\"\n                              min={0}\n                              max={24}\n                              value={calendarStart}\n                              onChange={setCalendarStart}\n                            />\n                            <Form.Input\n                              label=\"Calendar ends at\"\n                              name=\"cal-end\"\n                              type=\"number\"\n                              min={0}\n                              max={24}\n                              value={calendarEnd}\n                              onChange={setCalendarEnd}\n                            />\n                          </Form>\n                        </Popup.Content>\n                      </Popup>\n                    </Grid.Column>\n                    <Grid.Column width={15}>\n                      <Ref innerRef={dropToDeleteRef}>\n                        <Message negative floating>\n                          <Icon name=\"trash\" />\n                          Drop an event here to remove it from the schedule.\n                          <Icon name=\"trash\" />\n                        </Message>\n                      </Ref>\n                    </Grid.Column>\n                  </Grid>\n                </Container>\n                <FullCalendar\n                  // plugins for the basic FullCalendar implementation.\n                  //   - timeGridPlugin: Display days as vertical grid\n                  //   - luxonPlugin: Support timezones\n                  //   - interactionPlugin: Support dragging events from the sidebar\n                  plugins={[timeGridPlugin, luxonPlugin, interactionPlugin]}\n                  // define our \"own\" view (which is basically just saying how many days we want)\n                  initialView=\"agendaForComp\"\n                  views={{\n                    agendaForComp: {\n                      type: 'timeGrid',\n                      duration: { days: wcifSchedule.numberOfDays },\n                    },\n                  }}\n                  initialDate={wcifSchedule.startDate}\n                  // by default, FC offers support for separate \"whole-day\" events\n                  allDaySlot={false}\n                  // by default, FC would show a \"skip to next day\" toolbar\n                  headerToolbar={false}\n                  // the next three values can be configured via a popup menu\n                  slotMinTime={fcSlotMin}\n                  slotMaxTime={fcSlotMax}\n                  slotDuration={fcSlotDuration}\n                  // force FC to automagically compute an event's \"end\" flag,\n                  //   if the event doesn't specify one itself\n                  forceEventDuration\n                  defaultTimedEventDuration=\"00:30:00\"\n                  // no debuf when an event drag was cancelled\n                  dragRevertDuration={0}\n                  // make it so that the user's mouse must travel some non-zero distance\n                  //   until any \"drag\" event is triggered\n                  selectMinDistance={5}\n                  height=\"auto\"\n                  // intervals in which the events \"snap\" to the calendar grid\n                  snapDuration=\"00:05:00\"\n                  // display color for background + text\n                  eventColor={wcifRoom.color}\n                  eventTextColor={getTextColor(wcifRoom.color)}\n                  // localization settings\n                  locale={calendarLocale}\n                  timeZone={wcifVenue.timezone}\n                  // FIRE IN DA HOLE!\n                  events={fcActivities}\n                  // make the calendar editable\n                  editable\n                  eventDragStop={removeIfOverDropzone}\n                  // allow moving events as a whole around\n                  eventStartEditable\n                  eventDrop={changeActivityTimeslot}\n                  // allow resizing events, and explicitly allow resizing on both ends\n                  eventDurationEditable\n                  eventResizableFromStart\n                  eventResize={resizeActivity}\n                  // allow dropping external events onto the schedule\n                  droppable\n                  eventReceive={addActivityFromPicker}\n                  // allow highlighting an (empty) timeslot with your mouse to create a new event\n                  selectable\n                  dateClick={addActivityFromCalendarClick}\n                  select={addActivityFromCalendarDrag}\n                  // allow clicking on existing events to edit them\n                  eventClick={editCustomEvent}\n                />\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Container>\n      )}\n    </div>\n  );\n}\n\nexport default EditActivities;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}