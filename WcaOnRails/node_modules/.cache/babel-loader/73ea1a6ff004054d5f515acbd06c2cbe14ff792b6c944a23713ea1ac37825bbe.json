{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/SearchWidget/MultiSearchInput.jsx\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useState, useEffect } from 'react';\nimport { Dropdown } from 'semantic-ui-react';\nimport CompetitionItem from \"./CompetitionItem\";\nimport IncidentItem from \"./IncidentItem\";\nimport RegulationItem from \"./RegulationItem\";\nimport UserItem from \"./UserItem\";\nimport TextItem from \"./TextItem\";\nimport useDebounce from \"../../lib/hooks/useDebounce\";\nimport I18n from \"../../lib/i18n\";\nimport { fetchJsonOrError } from \"../../lib/requests/fetchWithAuthenticityToken\";\nimport \"../../stylesheets/search_widget/MultisearchInput.scss\";\nvar classToComponent = {\n  user: UserItem,\n  person: UserItem,\n  competition: CompetitionItem,\n  regulation: RegulationItem,\n  text: TextItem,\n  incident: IncidentItem\n};\nfunction ItemFor(_ref) {\n  var item = _ref.item;\n  var Component = classToComponent[item[\"class\"]];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selected-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Component, {\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }));\n}\nvar renderLabel = function renderLabel(_ref2) {\n  var item = _ref2.item;\n  return {\n    color: 'blue',\n    content: /*#__PURE__*/React.createElement(ItemFor, {\n      item: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 12\n      }\n    }),\n    className: 'multisearch-item',\n    as: 'div'\n  };\n};\nexport var itemToOption = function itemToOption(item) {\n  return {\n    item: item,\n    id: item.id,\n    key: item.id,\n    value: item.id,\n    // 'text' is used by the search method from the component, we need to put\n    // the text with a potential match here!\n    text: [item.id, item.name, item.title, item.content_html, item.search, item.public_summary].join(' '),\n    content: /*#__PURE__*/React.createElement(ItemFor, {\n      item: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 12\n      }\n    })\n  };\n};\nvar createSearchItem = function createSearchItem(search) {\n  return itemToOption({\n    \"class\": 'text',\n    id: 'search',\n    url: \"/search?q=\".concat(encodeURIComponent(search)),\n    search: search\n  });\n};\nvar DEBOUNCE_MS = 300;\nexport default function MultiSearchInput(_ref3) {\n  var _this2 = this;\n  var url = _ref3.url,\n    selectedValue = _ref3.selectedValue,\n    setSelectedValue = _ref3.setSelectedValue,\n    _ref3$showOptionToGoT = _ref3.showOptionToGoToSearchPage,\n    showOptionToGoToSearchPage = _ref3$showOptionToGoT === void 0 ? false : _ref3$showOptionToGoT,\n    _ref3$goToItemUrlOnCl = _ref3.goToItemUrlOnClick,\n    goToItemUrlOnClick = _ref3$goToItemUrlOnCl === void 0 ? false : _ref3$goToItemUrlOnCl,\n    placeholder = _ref3.placeholder,\n    removeNoResultsMessage = _ref3.removeNoResultsMessage,\n    _ref3$disabled = _ref3.disabled,\n    disabled = _ref3$disabled === void 0 ? false : _ref3$disabled,\n    _ref3$multiple = _ref3.multiple,\n    multiple = _ref3$multiple === void 0 ? true : _ref3$multiple;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    search = _useState2[0],\n    setSearch = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    results = _useState4[0],\n    setResults = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var debouncedSearch = useDebounce(search, DEBOUNCE_MS);\n  useEffect(function () {\n    setSearch('');\n  }, [selectedValue]);\n  useEffect(function () {\n    // Do nothing if search string is empty: we're just loading the page\n    // or we just selected an item.\n    // Either way, we want to keep the existing results.\n    if (debouncedSearch.length === 0) return;\n    if (debouncedSearch.length < 3) {\n      setResults([]);\n    } else {\n      setLoading(true);\n      // Note: we don't need to do any filtering on the results here,\n      // FUI's dropdown will automatically remove selected items from the\n      // options left for selection.\n      fetchJsonOrError(url(debouncedSearch)).then(function (_ref4) {\n        var data = _ref4.data;\n        return setResults(data.result.map(itemToOption));\n      })[\"finally\"](function () {\n        return setLoading(false);\n      });\n    }\n  }, [debouncedSearch, url]);\n  var dropDownOptions = [].concat(_toConsumableArray(showOptionToGoToSearchPage && search.length > 0 ? [createSearchItem(search)] : []), _toConsumableArray(multiple ? selectedValue : []), _toConsumableArray(results)).map(function (option) {\n    return _objectSpread(_objectSpread({}, option), {}, {\n      text: /*#__PURE__*/React.createElement(ItemFor, {\n        item: option.item,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      })\n    });\n  });\n  var onChangeInternal = function onChangeInternal(_, _ref5) {\n    var value = _ref5.value,\n      options = _ref5.options;\n    var map = Object.fromEntries(options.map(function (option) {\n      return [option.value, option];\n    }));\n    if (multiple) {\n      setSelectedValue(value.map(function (id) {\n        return itemToOption(map[id].item);\n      }));\n    } else {\n      var newSelectedValue = map[value] ? itemToOption(map[value].item) : null;\n      setSelectedValue(function (oldSelectedValue) {\n        var _newSelectedValue$ite;\n        // Redirect user to actual page if needed, and do not change the state.\n        if (goToItemUrlOnClick && (newSelectedValue === null || newSelectedValue === void 0 || (_newSelectedValue$ite = newSelectedValue.item) === null || _newSelectedValue$ite === void 0 ? void 0 : _newSelectedValue$ite.url) !== null) {\n          window.location.href = newSelectedValue.item.url;\n          return oldSelectedValue;\n        }\n        return newSelectedValue;\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(Dropdown, {\n    fluid: true,\n    selection: true,\n    multiple: multiple,\n    search: function search(values) {\n      return values.slice(0, 5);\n    },\n    clearable: !multiple,\n    icon: \"search\",\n    className: \"multisearch-dropdown\",\n    disabled: disabled,\n    value: multiple ? selectedValue.map(function (item) {\n      return item.id;\n    }) : selectedValue === null || selectedValue === void 0 ? void 0 : selectedValue.id,\n    searchQuery: search,\n    options: dropDownOptions,\n    onChange: onChangeInternal,\n    onSearchChange: function onSearchChange(e, _ref6) {\n      var searchQuery = _ref6.searchQuery;\n      return setSearch(searchQuery);\n    },\n    loading: loading,\n    noResultsMessage: removeNoResultsMessage ? null : I18n.t('search_results.index.not_found.generic'),\n    placeholder: placeholder || I18n.t('common.search_site'),\n    renderLabel: renderLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","Dropdown","CompetitionItem","IncidentItem","RegulationItem","UserItem","TextItem","useDebounce","I18n","fetchJsonOrError","classToComponent","user","person","competition","regulation","text","incident","ItemFor","_ref","item","Component","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","renderLabel","_ref2","color","content","_this","as","itemToOption","id","key","value","name","title","content_html","search","public_summary","join","createSearchItem","url","concat","encodeURIComponent","DEBOUNCE_MS","MultiSearchInput","_ref3","_this2","selectedValue","setSelectedValue","_ref3$showOptionToGoT","showOptionToGoToSearchPage","_ref3$goToItemUrlOnCl","goToItemUrlOnClick","placeholder","removeNoResultsMessage","_ref3$disabled","disabled","_ref3$multiple","multiple","_useState","_useState2","_slicedToArray","setSearch","_useState3","_useState4","results","setResults","_useState5","_useState6","loading","setLoading","debouncedSearch","length","then","_ref4","data","result","map","dropDownOptions","_toConsumableArray","option","_objectSpread","onChangeInternal","_","_ref5","options","Object","fromEntries","newSelectedValue","oldSelectedValue","_newSelectedValue$ite","window","location","href","fluid","selection","values","slice","clearable","icon","searchQuery","onChange","onSearchChange","e","_ref6","noResultsMessage","t"],"sources":["/app/WcaOnRails/app/webpacker/components/SearchWidget/MultiSearchInput.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Dropdown } from 'semantic-ui-react';\n\nimport CompetitionItem from './CompetitionItem';\nimport IncidentItem from './IncidentItem';\nimport RegulationItem from './RegulationItem';\nimport UserItem from './UserItem';\nimport TextItem from './TextItem';\nimport useDebounce from '../../lib/hooks/useDebounce';\nimport I18n from '../../lib/i18n';\nimport { fetchJsonOrError } from '../../lib/requests/fetchWithAuthenticityToken';\nimport '../../stylesheets/search_widget/MultisearchInput.scss';\n\nconst classToComponent = {\n  user: UserItem,\n  person: UserItem,\n  competition: CompetitionItem,\n  regulation: RegulationItem,\n  text: TextItem,\n  incident: IncidentItem,\n};\n\nfunction ItemFor({ item }) {\n  const Component = classToComponent[item.class];\n  return (\n    <div className=\"selected-item\">\n      <Component item={item} />\n    </div>\n  );\n}\n\nconst renderLabel = ({ item }) => ({\n  color: 'blue',\n  content: <ItemFor item={item} />,\n  className: 'multisearch-item',\n  as: 'div',\n});\n\nexport const itemToOption = (item) => ({\n  item,\n  id: item.id,\n  key: item.id,\n  value: item.id,\n  // 'text' is used by the search method from the component, we need to put\n  // the text with a potential match here!\n  text: [item.id, item.name, item.title, item.content_html, item.search, item.public_summary].join(' '),\n  content: <ItemFor item={item} />,\n});\n\nconst createSearchItem = (search) => itemToOption({\n  class: 'text',\n  id: 'search',\n  url: `/search?q=${encodeURIComponent(search)}`,\n  search,\n});\n\nconst DEBOUNCE_MS = 300;\n\nexport default function MultiSearchInput({\n  url,\n  // If multiple is true, selectedValue is an array of items, otherwise it's a single item.\n  selectedValue,\n  // If multiple is true, setSelectedValue is a function that takes an array of items, otherwise\n  // it's a function that takes a single item.\n  setSelectedValue,\n  showOptionToGoToSearchPage = false,\n  goToItemUrlOnClick = false,\n  placeholder,\n  removeNoResultsMessage,\n  disabled = false,\n  multiple = true,\n}) {\n  const [search, setSearch] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const debouncedSearch = useDebounce(search, DEBOUNCE_MS);\n\n  useEffect(() => {\n    setSearch('');\n  }, [selectedValue]);\n\n  useEffect(() => {\n    // Do nothing if search string is empty: we're just loading the page\n    // or we just selected an item.\n    // Either way, we want to keep the existing results.\n    if (debouncedSearch.length === 0) return;\n    if (debouncedSearch.length < 3) {\n      setResults([]);\n    } else {\n      setLoading(true);\n      // Note: we don't need to do any filtering on the results here,\n      // FUI's dropdown will automatically remove selected items from the\n      // options left for selection.\n      fetchJsonOrError(url(debouncedSearch))\n        .then(({ data }) => setResults(data.result.map(itemToOption)))\n        .finally(() => setLoading(false));\n    }\n  }, [debouncedSearch, url]);\n\n  const dropDownOptions = [\n    ...(showOptionToGoToSearchPage && search.length > 0 ? [createSearchItem(search)] : []),\n    ...(multiple ? selectedValue : []),\n    ...results,\n  ].map((option) => ({\n    ...option,\n    text: <ItemFor item={option.item} />,\n  }));\n\n  const onChangeInternal = (_, { value, options }) => {\n    const map = Object.fromEntries(\n      options.map((option) => [option.value, option]),\n    );\n\n    if (multiple) {\n      setSelectedValue(value.map((id) => itemToOption(map[id].item)));\n    } else {\n      const newSelectedValue = map[value] ? itemToOption(map[value].item) : null;\n\n      setSelectedValue((oldSelectedValue) => {\n        // Redirect user to actual page if needed, and do not change the state.\n        if (goToItemUrlOnClick && newSelectedValue?.item?.url !== null) {\n          window.location.href = newSelectedValue.item.url;\n          return oldSelectedValue;\n        }\n\n        return newSelectedValue;\n      });\n    }\n  };\n\n  return (\n    <Dropdown\n      fluid\n      selection\n      multiple={multiple}\n      search={(values) => values.slice(0, 5)}\n      clearable={!multiple}\n      icon=\"search\"\n      className=\"multisearch-dropdown\"\n      disabled={disabled}\n      value={multiple ? selectedValue.map((item) => item.id) : selectedValue?.id}\n      searchQuery={search}\n      options={dropDownOptions}\n      onChange={onChangeInternal}\n      onSearchChange={(e, { searchQuery }) => setSearch(searchQuery)}\n      loading={loading}\n      noResultsMessage={removeNoResultsMessage ? null : I18n.t('search_results.index.not_found.generic')}\n      placeholder={placeholder || I18n.t('common.search_site')}\n      renderLabel={renderLabel}\n    />\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}