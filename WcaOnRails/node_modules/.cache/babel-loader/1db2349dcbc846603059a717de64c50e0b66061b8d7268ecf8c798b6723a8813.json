{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/Panel/Board/CouncilLeaders.jsx\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useMemo, useState } from 'react';\nimport { Icon, Modal, Table } from 'semantic-ui-react';\nimport useLoadedData from \"../../../lib/hooks/useLoadedData\";\nimport { apiV0Urls } from \"../../../lib/requests/routes.js.erb\";\nimport Loading from \"../../Requests/Loading\";\nimport Errored from \"../../Requests/Errored\";\nimport LeaderChangeForm from \"./LeaderChangeForm\";\nimport { groupTypes, councilsStatus } from \"../../../lib/wca-data.js.erb\";\nexport default function CouncilLeaders() {\n  var _this = this;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    editCouncil = _useState2[0],\n    setEditCouncil = _useState2[1];\n  var councilsFetch = useLoadedData(apiV0Urls.userGroups.list(groupTypes.councils));\n  var councilLeadersFetch = useLoadedData(apiV0Urls.userRoles.listOfGroupType(groupTypes.councils, {\n    status: councilsStatus.leader,\n    isActive: true\n  }));\n  var leaders = useMemo(function () {\n    var _councilLeadersFetch$;\n    var leaderMap = {};\n    councilLeadersFetch === null || councilLeadersFetch === void 0 || (_councilLeadersFetch$ = councilLeadersFetch.data) === null || _councilLeadersFetch$ === void 0 || _councilLeadersFetch$.forEach(function (leader) {\n      leaderMap[leader.group.id] = leader;\n    });\n    return leaderMap;\n  }, [councilLeadersFetch.data]);\n  if (councilLeadersFetch.loading || councilsFetch.loading) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 12\n      }\n    });\n  }\n  if (councilLeadersFetch.error || councilsFetch.error) {\n    return /*#__PURE__*/React.createElement(Errored, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n    celled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"Group\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, \"Leader\"))), /*#__PURE__*/React.createElement(Table.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, councilsFetch.data.map(function (council) {\n    var _leaders$council$id;\n    return /*#__PURE__*/React.createElement(Table.Row, {\n      key: council.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      link: true,\n      name: \"edit\",\n      onClick: function onClick() {\n        return setEditCouncil(council);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    }, council.name), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 15\n      }\n    }, (_leaders$council$id = leaders[council.id]) === null || _leaders$council$id === void 0 || (_leaders$council$id = _leaders$council$id.user) === null || _leaders$council$id === void 0 ? void 0 : _leaders$council$id.name));\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    open: !!editCouncil,\n    onClose: function onClose() {\n      return setEditCouncil(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Edit \".concat(editCouncil === null || editCouncil === void 0 ? void 0 : editCouncil.name, \" Leader\")), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LeaderChangeForm, {\n    setEditLeader: setEditCouncil,\n    syncData: councilLeadersFetch.sync,\n    group: editCouncil,\n    oldLeader: leaders[editCouncil === null || editCouncil === void 0 ? void 0 : editCouncil.id],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"names":["React","useMemo","useState","Icon","Modal","Table","useLoadedData","apiV0Urls","Loading","Errored","LeaderChangeForm","groupTypes","councilsStatus","CouncilLeaders","_this","_useState","_useState2","_slicedToArray","editCouncil","setEditCouncil","councilsFetch","userGroups","list","councils","councilLeadersFetch","userRoles","listOfGroupType","status","leader","isActive","leaders","_councilLeadersFetch$","leaderMap","data","forEach","group","id","loading","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","error","Fragment","celled","Header","Row","HeaderCell","Body","map","council","_leaders$council$id","key","Cell","link","name","onClick","user","open","onClose","concat","Content","setEditLeader","syncData","sync","oldLeader"],"sources":["/app/WcaOnRails/app/webpacker/components/Panel/Board/CouncilLeaders.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { Icon, Modal, Table } from 'semantic-ui-react';\nimport useLoadedData from '../../../lib/hooks/useLoadedData';\nimport { apiV0Urls } from '../../../lib/requests/routes.js.erb';\nimport Loading from '../../Requests/Loading';\nimport Errored from '../../Requests/Errored';\nimport LeaderChangeForm from './LeaderChangeForm';\nimport { groupTypes, councilsStatus } from '../../../lib/wca-data.js.erb';\n\nexport default function CouncilLeaders() {\n  const [editCouncil, setEditCouncil] = useState();\n  const councilsFetch = useLoadedData(apiV0Urls.userGroups.list(groupTypes.councils));\n  const councilLeadersFetch = useLoadedData(\n    apiV0Urls.userRoles.listOfGroupType(groupTypes.councils, {\n      status: councilsStatus.leader,\n      isActive: true,\n    }),\n  );\n\n  const leaders = useMemo(() => {\n    const leaderMap = {};\n    councilLeadersFetch?.data?.forEach((leader) => {\n      leaderMap[leader.group.id] = leader;\n    });\n    return leaderMap;\n  }, [councilLeadersFetch.data]);\n\n  if (councilLeadersFetch.loading || councilsFetch.loading) {\n    return <Loading />;\n  }\n  if (councilLeadersFetch.error || councilsFetch.error) {\n    return <Errored />;\n  }\n\n  return (\n    <>\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell />\n            <Table.HeaderCell>Group</Table.HeaderCell>\n            <Table.HeaderCell>Leader</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {councilsFetch.data.map((council) => (\n            <Table.Row key={council.id}>\n              <Table.Cell>\n                <Icon\n                  link\n                  name=\"edit\"\n                  onClick={() => setEditCouncil(council)}\n                />\n              </Table.Cell>\n              <Table.Cell>{council.name}</Table.Cell>\n              <Table.Cell>{leaders[council.id]?.user?.name}</Table.Cell>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n      <Modal\n        open={!!editCouncil}\n        onClose={() => setEditCouncil(null)}\n      >\n        <Modal.Header>{`Edit ${editCouncil?.name} Leader`}</Modal.Header>\n        <Modal.Content>\n          <LeaderChangeForm\n            setEditLeader={setEditCouncil}\n            syncData={councilLeadersFetch.sync}\n            group={editCouncil}\n            oldLeader={leaders[editCouncil?.id]}\n          />\n        </Modal.Content>\n      </Modal>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}