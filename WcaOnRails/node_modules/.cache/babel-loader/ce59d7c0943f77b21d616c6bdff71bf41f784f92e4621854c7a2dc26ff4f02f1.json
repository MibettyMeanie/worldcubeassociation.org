{"ast":null,"code":"var _excluded = [\"title\", \"trigger\", \"triggerButtonProps\", \"children\", \"hasUnsavedChanges\", \"disabled\", \"tooltip\", \"reset\", \"onOk\"];\nvar _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/EditEvents/Modals/ButtonActivatedModal.js\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useState } from 'react';\nimport { Button, Form, Modal } from 'semantic-ui-react';\nimport { useConfirm } from \"../../../lib/providers/ConfirmProvider\";\n\n/**\n * Shows a trigger that when activated, opens this modal.\n * @param {string} title - title of modal\n * @param {string} trigger - text to show in trigger. This gets wrapped in a button.\n * @param {JSX.Element} content - content of modal\n * @param {boolean} hasUnsavedChanges\n *  - if true, the modal will show a confirm dialog before closing.\n * @returns {React.ReactElement}\n */\nexport default function ButtonActivatedModal(_ref) {\n  var title = _ref.title,\n    trigger = _ref.trigger,\n    _ref$triggerButtonPro = _ref.triggerButtonProps,\n    triggerButtonProps = _ref$triggerButtonPro === void 0 ? {} : _ref$triggerButtonPro,\n    children = _ref.children,\n    hasUnsavedChanges = _ref.hasUnsavedChanges,\n    disabled = _ref.disabled,\n    tooltip = _ref.tooltip,\n    _ref$reset = _ref.reset,\n    reset = _ref$reset === void 0 ? function () {\n      return null;\n    } : _ref$reset,\n    onOk = _ref.onOk,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    open = _useState2[0],\n    setOpen = _useState2[1];\n  var confirm = useConfirm();\n\n  /**\n   * Gets called either when you press escape or the \"close\" button\n   */\n  var onClose = function onClose() {\n    if (hasUnsavedChanges) {\n      confirm({\n        content: 'Are you sure you want to discard your changes?'\n      }).then(function () {\n        reset();\n        setOpen(false);\n      });\n    } else {\n      setOpen(false);\n    }\n  };\n  var handleSubmit = function handleSubmit(e) {\n    // This prevents the form from submitting\n    e.preventDefault();\n    // This prevents a possible parent modal from also handling submit\n    e.stopPropagation();\n    onOk();\n    setOpen(false);\n  };\n\n  // not entirely sure if this is necessary - can remove usage?\n  var handleTriggerClick = function handleTriggerClick(e) {\n    // For some reason the default behavior closes the parent and child modals.\n    e.preventDefault();\n  };\n  var onOpen = function onOpen() {\n    if (!disabled) {\n      setOpen(true);\n    }\n  };\n\n  // tool tips on disabled semantic ui buttons don't work... so wrap in span\n  var Trigger = /*#__PURE__*/React.createElement(\"span\", {\n    \"data-tooltip\": tooltip !== null && tooltip !== void 0 ? tooltip : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, Object.assign({\n    basic: true,\n    compact: true,\n    onClick: handleTriggerClick,\n    disabled: disabled\n  }, triggerButtonProps, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), trigger));\n  return /*#__PURE__*/React.createElement(Modal, Object.assign({\n    as: Form,\n    onSubmit: handleSubmit,\n    size: \"tiny\",\n    trigger: props.open ? undefined : Trigger,\n    open: open,\n    onOpen: onOpen,\n    onClose: onClose,\n    closeOnDimmerClick: false,\n    closeOnDocumentClick: false\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, title), /*#__PURE__*/React.createElement(Modal.Content, {\n    scrolling: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Description, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, children)), /*#__PURE__*/React.createElement(Modal.Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"orange\",\n    type: \"button\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"green\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"Ok\")));\n}","map":{"version":3,"names":["React","useState","Button","Form","Modal","useConfirm","ButtonActivatedModal","_ref","title","trigger","_ref$triggerButtonPro","triggerButtonProps","children","hasUnsavedChanges","disabled","tooltip","_ref$reset","reset","onOk","props","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","open","setOpen","confirm","onClose","content","then","handleSubmit","e","preventDefault","stopPropagation","handleTriggerClick","onOpen","Trigger","createElement","undefined","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Object","assign","basic","compact","onClick","size","as","onSubmit","closeOnDimmerClick","closeOnDocumentClick","Header","Content","scrolling","Description","Actions","color","type"],"sources":["/app/WcaOnRails/app/webpacker/components/EditEvents/Modals/ButtonActivatedModal.js"],"sourcesContent":["/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useState } from 'react';\nimport { Button, Form, Modal } from 'semantic-ui-react';\nimport { useConfirm } from '../../../lib/providers/ConfirmProvider';\n\n/**\n * Shows a trigger that when activated, opens this modal.\n * @param {string} title - title of modal\n * @param {string} trigger - text to show in trigger. This gets wrapped in a button.\n * @param {JSX.Element} content - content of modal\n * @param {boolean} hasUnsavedChanges\n *  - if true, the modal will show a confirm dialog before closing.\n * @returns {React.ReactElement}\n */\nexport default function ButtonActivatedModal({\n  title,\n  trigger,\n  triggerButtonProps = {},\n  children,\n  hasUnsavedChanges,\n  disabled,\n  tooltip,\n  reset = () => null,\n  onOk,\n  ...props\n}) {\n  const [open, setOpen] = useState(false);\n  const confirm = useConfirm();\n\n  /**\n   * Gets called either when you press escape or the \"close\" button\n   */\n  const onClose = () => {\n    if (hasUnsavedChanges) {\n      confirm({ content: 'Are you sure you want to discard your changes?' })\n        .then(() => {\n          reset();\n          setOpen(false);\n        });\n    } else {\n      setOpen(false);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    // This prevents the form from submitting\n    e.preventDefault();\n    // This prevents a possible parent modal from also handling submit\n    e.stopPropagation();\n    onOk();\n    setOpen(false);\n  };\n\n  // not entirely sure if this is necessary - can remove usage?\n  const handleTriggerClick = (e) => {\n    // For some reason the default behavior closes the parent and child modals.\n    e.preventDefault();\n  };\n\n  const onOpen = () => {\n    if (!disabled) {\n      setOpen(true);\n    }\n  };\n\n  // tool tips on disabled semantic ui buttons don't work... so wrap in span\n  const Trigger = (\n    <span data-tooltip={tooltip ?? undefined}>\n      <Button\n        basic\n        compact\n        onClick={handleTriggerClick}\n        disabled={disabled}\n        {...triggerButtonProps}\n        size=\"small\"\n      >\n        {trigger}\n      </Button>\n    </span>\n  );\n\n  return (\n    <Modal\n      as={Form}\n      onSubmit={handleSubmit}\n      size=\"tiny\"\n      trigger={props.open ? undefined : Trigger}\n      open={open}\n      onOpen={onOpen}\n      onClose={onClose}\n      closeOnDimmerClick={false}\n      closeOnDocumentClick={false}\n      {...props}\n    >\n      <Modal.Header>{title}</Modal.Header>\n      <Modal.Content scrolling>\n        <Modal.Description>\n          {children}\n        </Modal.Description>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button color=\"orange\" type=\"button\" onClick={onClose}>Close</Button>\n        <Button color=\"green\" type=\"submit\">Ok</Button>\n      </Modal.Actions>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}