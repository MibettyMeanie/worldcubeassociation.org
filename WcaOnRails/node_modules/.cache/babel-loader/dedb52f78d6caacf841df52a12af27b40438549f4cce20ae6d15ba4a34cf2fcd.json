{"ast":null,"code":"import _partial from \"lodash/partial\";\nimport _remove from \"lodash/remove\";\nimport _findIndex from \"lodash/findIndex\";\nvar _jsxFileName = \"/app/WcaOnRails/app/webpacker/lib/edit-schedule.js\";\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport EditSchedule from \"../components/EditSchedule\";\nimport { calendarHandlers, dataToFcEvent, fcEventToActivity, momentToIso, selectedEventInCalendar, singleSelectEvent, singleSelectLastEvent } from \"./utils/calendar\";\nimport { roomWcifFromId } from \"./utils/wcif\";\nimport { newActivityId, defaultDurationFromActivityCode } from \"./utils/edit-schedule\";\nimport { scheduleElementSelector } from \"./helpers/edit-schedule\";\nvar state = {};\nvar setupCalendarHandlers = function setupCalendarHandlers() {};\n\n/* eslint import/no-cycle: \"off\" */\n/* eslint no-alert: \"off\" */\n\nexport default function rootRender() {\n  ReactDOM.render( /*#__PURE__*/React.createElement(EditSchedule, {\n    competitionInfo: state.competitionInfo,\n    locale: state.locale,\n    setupCalendarHandlers: setupCalendarHandlers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }), document.getElementById('edit-schedule-area'));\n}\n\n// NOTE: while making this file pretty big, putting these here is the only\n// way I found to avoid a circular dependency.\nfunction handleEventModifiedInCalendar(reactElem, event) {\n  var room = roomWcifFromId(reactElem.props.scheduleWcif, reactElem.state.selectedRoom);\n  var activityIndex = _findIndex(room.activities, {\n    id: event.id\n  });\n  if (activityIndex < 0) {\n    throw new Error(\"This is very very BAD, I couldn't find an activity matching the modified event!\");\n  }\n  var currentActivity = room.activities[activityIndex];\n  var updatedActivity = fcEventToActivity(event);\n  var activityToMoments = function activityToMoments(_ref) {\n    var startTime = _ref.startTime,\n      endTime = _ref.endTime;\n    return [window.moment(startTime), window.moment(endTime)];\n  };\n  var _activityToMoments = activityToMoments(currentActivity),\n    _activityToMoments2 = _slicedToArray(_activityToMoments, 2),\n    currentStart = _activityToMoments2[0],\n    currentEnd = _activityToMoments2[1];\n  var _activityToMoments3 = activityToMoments(updatedActivity),\n    _activityToMoments4 = _slicedToArray(_activityToMoments3, 2),\n    updatedStart = _activityToMoments4[0],\n    updatedEnd = _activityToMoments4[1];\n  /* Move and proportionally scale child activities. */\n  var lengthRate = updatedEnd.diff(updatedStart) / currentEnd.diff(currentStart);\n  updatedActivity.childActivities.forEach(function (child) {\n    var childActivity = child;\n    var _activityToMoments5 = activityToMoments(childActivity),\n      _activityToMoments6 = _slicedToArray(_activityToMoments5, 2),\n      childStart = _activityToMoments6[0],\n      childEnd = _activityToMoments6[1];\n    var updatedStartDiff = Math.floor(childStart.diff(currentStart) * lengthRate);\n    childActivity.startTime = updatedStart.clone().add(updatedStartDiff, 'ms').utc().format();\n    var updatedEndDiff = Math.floor(childEnd.diff(currentStart) * lengthRate);\n    childActivity.endTime = updatedStart.clone().add(updatedEndDiff, 'ms').utc().format();\n  });\n  room.activities[activityIndex] = updatedActivity;\n  // We rootRender to display the \"Please save your changes...\" message\n  rootRender();\n}\nfunction handleRemoveEventFromCalendar(reactElem, event) {\n  /* eslint no-restricted-globals: \"off\" */\n  if (!confirm(\"Are you sure you want to remove \".concat(event.title))) {\n    return false;\n  }\n\n  // Remove activityCode from the list used by the ActivityPicker\n  var newActivityCodeList = reactElem.state.usedActivityCodeList;\n  var activityCodeIndex = newActivityCodeList.indexOf(event.activityCode);\n  if (activityCodeIndex < 0) {\n    throw new Error(\"This is BAD, I couldn't find an activity code when removing event!\");\n  }\n  newActivityCodeList.splice(activityCodeIndex, 1);\n  var scheduleWcif = reactElem.props.scheduleWcif;\n  // Remove activity from the list used by the ActivityPicker\n  var room = roomWcifFromId(scheduleWcif, reactElem.state.selectedRoom);\n  _remove(room.activities, {\n    id: event.id\n  });\n\n  // We rootRender to display the \"Please save your changes...\" message\n  reactElem.setState({\n    usedActivityCodeList: newActivityCodeList\n  }, rootRender());\n  $(scheduleElementSelector).fullCalendar('removeEvents', event.id);\n  singleSelectLastEvent(scheduleWcif, reactElem.state.selectedRoom);\n  return true;\n}\nfunction handleAddActivityToCalendar(reactElem, activityData, renderItOnCalendar) {\n  var currentEventSelected = selectedEventInCalendar();\n  var roomSelected = roomWcifFromId(reactElem.props.scheduleWcif, reactElem.state.selectedRoom);\n  if (roomSelected) {\n    var newActivity = {\n      id: activityData.id || newActivityId(),\n      name: activityData.name,\n      activityCode: activityData.activityCode,\n      childActivities: []\n    };\n    if (activityData.startTime && activityData.endTime) {\n      newActivity.startTime = activityData.startTime;\n      newActivity.endTime = activityData.endTime;\n    } else if (currentEventSelected) {\n      var newStart = currentEventSelected.end.clone();\n      newActivity.startTime = momentToIso(newStart);\n      var newEnd = newStart.add(defaultDurationFromActivityCode(newActivity.activityCode), 'm');\n      newActivity.endTime = momentToIso(newEnd);\n    } else {\n      // Do nothing, user cliked an event without any event selected.\n      return;\n    }\n    roomSelected.activities.push(newActivity);\n    if (renderItOnCalendar) {\n      var fcEvent = dataToFcEvent(newActivity);\n      singleSelectEvent(fcEvent);\n      $(scheduleElementSelector).fullCalendar('renderEvent', fcEvent);\n    }\n    // update list of activityCode used, and rootRender to display the save message\n    reactElem.setState({\n      usedActivityCodeList: [].concat(_toConsumableArray(reactElem.state.usedActivityCodeList), [newActivity.activityCode])\n    }, rootRender);\n  }\n}\nsetupCalendarHandlers = function setupCalendarHandlers(editor) {\n  calendarHandlers.addActivityToCalendar = _partial(handleAddActivityToCalendar, editor);\n  calendarHandlers.eventModifiedInCalendar = _partial(handleEventModifiedInCalendar, editor);\n  calendarHandlers.removeEventFromCalendar = _partial(handleRemoveEventFromCalendar, editor);\n};\nwindow.wca.initializeScheduleForm = function (competitionInfo, locale) {\n  state.competitionInfo = competitionInfo;\n  state.locale = locale;\n  rootRender();\n};","map":{"version":3,"names":["React","ReactDOM","EditSchedule","calendarHandlers","dataToFcEvent","fcEventToActivity","momentToIso","selectedEventInCalendar","singleSelectEvent","singleSelectLastEvent","roomWcifFromId","newActivityId","defaultDurationFromActivityCode","scheduleElementSelector","state","setupCalendarHandlers","rootRender","render","createElement","competitionInfo","locale","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","document","getElementById","handleEventModifiedInCalendar","reactElem","event","room","props","scheduleWcif","selectedRoom","activityIndex","_findIndex","activities","id","Error","currentActivity","updatedActivity","activityToMoments","_ref","startTime","endTime","window","moment","_activityToMoments","_activityToMoments2","_slicedToArray","currentStart","currentEnd","_activityToMoments3","_activityToMoments4","updatedStart","updatedEnd","lengthRate","diff","childActivities","forEach","child","childActivity","_activityToMoments5","_activityToMoments6","childStart","childEnd","updatedStartDiff","Math","floor","clone","add","utc","format","updatedEndDiff","handleRemoveEventFromCalendar","confirm","concat","title","newActivityCodeList","usedActivityCodeList","activityCodeIndex","indexOf","activityCode","splice","_remove","setState","$","fullCalendar","handleAddActivityToCalendar","activityData","renderItOnCalendar","currentEventSelected","roomSelected","newActivity","name","newStart","end","newEnd","push","fcEvent","_toConsumableArray","editor","addActivityToCalendar","_partial","eventModifiedInCalendar","removeEventFromCalendar","wca","initializeScheduleForm"],"sources":["/app/WcaOnRails/app/webpacker/lib/edit-schedule.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport _ from 'lodash';\n\nimport EditSchedule from '../components/EditSchedule';\nimport {\n  calendarHandlers,\n  dataToFcEvent,\n  fcEventToActivity,\n  momentToIso,\n  selectedEventInCalendar,\n  singleSelectEvent,\n  singleSelectLastEvent,\n} from './utils/calendar';\nimport {\n  roomWcifFromId,\n} from './utils/wcif';\nimport {\n  newActivityId,\n  defaultDurationFromActivityCode,\n} from './utils/edit-schedule';\nimport { scheduleElementSelector } from './helpers/edit-schedule';\n\nconst state = {};\nlet setupCalendarHandlers = () => {};\n\n/* eslint import/no-cycle: \"off\" */\n/* eslint no-alert: \"off\" */\n\nexport default function rootRender() {\n  ReactDOM.render(\n    <EditSchedule\n      competitionInfo={state.competitionInfo}\n      locale={state.locale}\n      setupCalendarHandlers={setupCalendarHandlers}\n    />,\n    document.getElementById('edit-schedule-area'),\n  );\n}\n\n// NOTE: while making this file pretty big, putting these here is the only\n// way I found to avoid a circular dependency.\nfunction handleEventModifiedInCalendar(reactElem, event) {\n  const room = roomWcifFromId(reactElem.props.scheduleWcif, reactElem.state.selectedRoom);\n  const activityIndex = _.findIndex(room.activities, { id: event.id });\n  if (activityIndex < 0) {\n    throw new Error(\"This is very very BAD, I couldn't find an activity matching the modified event!\");\n  }\n  const currentActivity = room.activities[activityIndex];\n  const updatedActivity = fcEventToActivity(event);\n  const activityToMoments = ({ startTime, endTime }) => [\n    window.moment(startTime),\n    window.moment(endTime),\n  ];\n  const [currentStart, currentEnd] = activityToMoments(currentActivity);\n  const [updatedStart, updatedEnd] = activityToMoments(updatedActivity);\n  /* Move and proportionally scale child activities. */\n  const lengthRate = updatedEnd.diff(updatedStart) / currentEnd.diff(currentStart);\n  updatedActivity.childActivities.forEach((child) => {\n    const childActivity = child;\n    const [childStart, childEnd] = activityToMoments(childActivity);\n    const updatedStartDiff = Math.floor(childStart.diff(currentStart) * lengthRate);\n    childActivity.startTime = updatedStart.clone().add(updatedStartDiff, 'ms').utc().format();\n    const updatedEndDiff = Math.floor(childEnd.diff(currentStart) * lengthRate);\n    childActivity.endTime = updatedStart.clone().add(updatedEndDiff, 'ms').utc().format();\n  });\n  room.activities[activityIndex] = updatedActivity;\n  // We rootRender to display the \"Please save your changes...\" message\n  rootRender();\n}\n\nfunction handleRemoveEventFromCalendar(reactElem, event) {\n  /* eslint no-restricted-globals: \"off\" */\n  if (!confirm(`Are you sure you want to remove ${event.title}`)) {\n    return false;\n  }\n\n  // Remove activityCode from the list used by the ActivityPicker\n  const newActivityCodeList = reactElem.state.usedActivityCodeList;\n  const activityCodeIndex = newActivityCodeList.indexOf(event.activityCode);\n  if (activityCodeIndex < 0) {\n    throw new Error(\"This is BAD, I couldn't find an activity code when removing event!\");\n  }\n  newActivityCodeList.splice(activityCodeIndex, 1);\n  const { scheduleWcif } = reactElem.props;\n  // Remove activity from the list used by the ActivityPicker\n  const room = roomWcifFromId(scheduleWcif, reactElem.state.selectedRoom);\n  _.remove(room.activities, { id: event.id });\n\n  // We rootRender to display the \"Please save your changes...\" message\n  reactElem.setState({ usedActivityCodeList: newActivityCodeList }, rootRender());\n\n  $(scheduleElementSelector).fullCalendar('removeEvents', event.id);\n  singleSelectLastEvent(scheduleWcif, reactElem.state.selectedRoom);\n  return true;\n}\n\nfunction handleAddActivityToCalendar(reactElem, activityData, renderItOnCalendar) {\n  const currentEventSelected = selectedEventInCalendar();\n  const roomSelected = roomWcifFromId(reactElem.props.scheduleWcif, reactElem.state.selectedRoom);\n  if (roomSelected) {\n    const newActivity = {\n      id: activityData.id || newActivityId(),\n      name: activityData.name,\n      activityCode: activityData.activityCode,\n      childActivities: [],\n    };\n    if (activityData.startTime && activityData.endTime) {\n      newActivity.startTime = activityData.startTime;\n      newActivity.endTime = activityData.endTime;\n    } else if (currentEventSelected) {\n      const newStart = currentEventSelected.end.clone();\n      newActivity.startTime = momentToIso(newStart);\n      const newEnd = newStart.add(defaultDurationFromActivityCode(newActivity.activityCode), 'm');\n      newActivity.endTime = momentToIso(newEnd);\n    } else {\n      // Do nothing, user cliked an event without any event selected.\n      return;\n    }\n    roomSelected.activities.push(newActivity);\n    if (renderItOnCalendar) {\n      const fcEvent = dataToFcEvent(newActivity);\n      singleSelectEvent(fcEvent);\n      $(scheduleElementSelector).fullCalendar('renderEvent', fcEvent);\n    }\n    // update list of activityCode used, and rootRender to display the save message\n    reactElem.setState({\n      usedActivityCodeList: [\n        ...reactElem.state.usedActivityCodeList,\n        newActivity.activityCode,\n      ],\n    }, rootRender);\n  }\n}\n\nsetupCalendarHandlers = (editor) => {\n  calendarHandlers.addActivityToCalendar = _.partial(handleAddActivityToCalendar, editor);\n  calendarHandlers.eventModifiedInCalendar = _.partial(handleEventModifiedInCalendar, editor);\n  calendarHandlers.removeEventFromCalendar = _.partial(handleRemoveEventFromCalendar, editor);\n};\n\nwindow.wca.initializeScheduleForm = (competitionInfo, locale) => {\n  state.competitionInfo = competitionInfo;\n  state.locale = locale;\n  rootRender();\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}