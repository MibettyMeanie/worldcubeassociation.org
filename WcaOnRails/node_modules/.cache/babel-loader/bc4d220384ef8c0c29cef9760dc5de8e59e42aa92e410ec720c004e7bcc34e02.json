{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/index.js\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { Button, Container, Divider, Form, Grid, Icon, List, Message, Popup, Ref, Segment, Sticky } from 'semantic-ui-react';\nimport FullCalendar from '@fullcalendar/react';\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport luxonPlugin, { toLuxonDateTime, toLuxonDuration } from '@fullcalendar/luxon3';\nimport { useDispatch, useStore } from \"../../../lib/providers/StoreProvider\";\nimport { useConfirm } from \"../../../lib/providers/ConfirmProvider\";\nimport useInputState from \"../../../lib/hooks/useInputState\";\nimport ActivityPicker from \"./ActivityPicker\";\nimport { roomWcifFromId, venueWcifFromRoomId } from \"../../../lib/utils/wcif\";\nimport { getTextColor } from \"../../../lib/utils/calendar\";\nimport { addActivity, editActivity, moveActivity, removeActivity, scaleActivity } from \"../store/actions\";\nimport { friendlyTimezoneName } from \"../../../lib/wca-data.js.erb\";\nimport { defaultDurationFromActivityCode, fcEventToActivityAndDates, luxonToWcifIso } from \"../../../lib/utils/edit-schedule\";\nimport EditActivityModal from \"./EditActivityModal\";\nfunction EditActivities(_ref) {\n  var _this = this;\n  var wcifEvents = _ref.wcifEvents,\n    calendarLocale = _ref.calendarLocale;\n  var _useStore = useStore(),\n    wcifSchedule = _useStore.wcifSchedule;\n  var dispatch = useDispatch();\n  var confirm = useConfirm();\n  var _useInputState = useInputState(),\n    _useInputState2 = _slicedToArray(_useInputState, 2),\n    selectedRoomId = _useInputState2[0],\n    setSelectedRoomId = _useInputState2[1];\n  var _useInputState3 = useInputState(15),\n    _useInputState4 = _slicedToArray(_useInputState3, 2),\n    minutesPerRow = _useInputState4[0],\n    setMinutesPerRow = _useInputState4[1];\n  var _useInputState5 = useInputState(8),\n    _useInputState6 = _slicedToArray(_useInputState5, 2),\n    calendarStart = _useInputState6[0],\n    setCalendarStart = _useInputState6[1];\n  var _useInputState7 = useInputState(20),\n    _useInputState8 = _slicedToArray(_useInputState7, 2),\n    calendarEnd = _useInputState8[0],\n    setCalendarEnd = _useInputState8[1];\n\n  // This part is ugly because Semantic-UI and Fullcalendar disagree\n  //   about how modals should be handled.\n  // According to Semantic-UI, modals are \"always there\" in the DOM,\n  //   just that their \"isOpen\" state is false most of the time.\n  //   So they simply don't show but they are already part of the DOM tree.\n  // The (click-)event-based model of Fullcalendar however dictates that\n  //   we can only \"instantiate\" a modal once the user actually clicks somewhere on the calendar.\n  //   So we pre-fill the modal with empty state and set it accordingly on every event click.\n  // If somebody has a better idea how to handle this, please shout.\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isActivityModalOpen = _useState2[0],\n    setActivityModalOpen = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    modalActivity = _useState4[0],\n    setModalActivity = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    modalLuxonStart = _useState6[0],\n    setModalLuxonStart = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    modalLuxonEnd = _useState8[0],\n    setModalLuxonEnd = _useState8[1];\n  // ------ MODAL HACK END ------\n\n  var fcSlotDuration = useMemo(function () {\n    return \"00:\".concat(minutesPerRow.toString().padStart(2, '0'), \":00\");\n  }, [minutesPerRow]);\n  var fcSlotMin = useMemo(function () {\n    return \"\".concat(calendarStart.toString().padStart(2, '0'), \":00:00\");\n  }, [calendarStart]);\n  var fcSlotMax = useMemo(function () {\n    return \"\".concat(calendarEnd.toString().padStart(2, '0'), \":00:00\");\n  }, [calendarEnd]);\n  var wcifVenue = useMemo(function () {\n    return venueWcifFromRoomId(wcifSchedule, selectedRoomId);\n  }, [selectedRoomId, wcifSchedule]);\n  var wcifRoom = useMemo(function () {\n    return roomWcifFromId(wcifSchedule, selectedRoomId);\n  }, [selectedRoomId, wcifSchedule]);\n  var fcActivities = useMemo(function () {\n    return wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.activities.map(function (activity) {\n      return {\n        title: activity.name,\n        start: activity.startTime,\n        end: activity.endTime,\n        extendedProps: {\n          activityId: activity.id,\n          activityCode: activity.activityCode,\n          childActivities: activity.childActivities\n        }\n      };\n    });\n  }, [wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.activities]);\n\n  // we 'fake' our own ref due to quirks in useRef + useEffect combinations.\n  // See https://medium.com/@teh_builder/ref-objects-inside-useeffect-hooks-eb7c15198780\n  var activityPickerRef = useCallback(function (node) {\n    if (!node) return;\n\n    // eslint-disable-next-line no-new\n    new Draggable(node, {\n      itemSelector: '.fc-draggable',\n      eventData: function eventData(eventEl) {\n        var activityCode = eventEl.getAttribute('wcif-ac');\n        var defaultDuration = defaultDurationFromActivityCode(activityCode);\n        return {\n          title: eventEl.getAttribute('wcif-title'),\n          duration: \"00:\".concat(defaultDuration.toString().padStart(2, '0'), \":00\"),\n          extendedProps: {\n            activityCode: activityCode\n          }\n        };\n      }\n    });\n  }, []);\n  var dropToDeleteRef = useRef(null);\n  var removeIfOverDropzone = function removeIfOverDropzone(_ref2) {\n    var fcEvent = _ref2.event,\n      jsEvent = _ref2.jsEvent;\n    if (!dropToDeleteRef.current) return;\n    var elem = dropToDeleteRef.current;\n    var rect = elem.getBoundingClientRect();\n    var top = rect.top + window.scrollY;\n    var bottom = rect.bottom + window.scrollY;\n    var left = rect.left + window.scrollX;\n    var right = rect.right + window.scrollX;\n    if (jsEvent.pageX >= left && jsEvent.pageX <= right && jsEvent.pageY >= top && jsEvent.pageY <= bottom) {\n      confirm({\n        content: \"Are you sure you want to delete the event \".concat(fcEvent.title, \"? THIS ACTION CANNOT BE UNDONE!\")\n      }).then(function () {\n        var activityId = fcEvent.extendedProps.activityId;\n        dispatch(removeActivity(activityId));\n      });\n    }\n  };\n  var addActivityFromPicker = function addActivityFromPicker(_ref3) {\n    var fcEvent = _ref3.event,\n      calendar = _ref3.view.calendar;\n    var _fcEventToActivityAnd = fcEventToActivityAndDates(fcEvent, calendar),\n      activity = _fcEventToActivityAnd.activity;\n    dispatch(addActivity(activity, wcifRoom.id));\n  };\n  var changeActivityTimeslot = function changeActivityTimeslot(_ref4) {\n    var fcEvent = _ref4.event,\n      delta = _ref4.delta,\n      calendar = _ref4.view.calendar;\n    var activityId = fcEvent.extendedProps.activityId;\n    var duration = toLuxonDuration(delta, calendar);\n    var deltaIso = duration.toISO();\n    dispatch(moveActivity(activityId, deltaIso));\n  };\n  var resizeActivity = function resizeActivity(_ref5) {\n    var fcEvent = _ref5.event,\n      startDelta = _ref5.startDelta,\n      endDelta = _ref5.endDelta,\n      calendar = _ref5.view.calendar;\n    var activityId = fcEvent.extendedProps.activityId;\n    var startScaleDuration = toLuxonDuration(startDelta, calendar);\n    var startScaleIso = startScaleDuration.toISO();\n    var endScaleDuration = toLuxonDuration(endDelta, calendar);\n    var endScaleIso = endScaleDuration.toISO();\n    dispatch(scaleActivity(activityId, startScaleIso, endScaleIso));\n  };\n  var addActivityFromCalendar = function addActivityFromCalendar(startLuxon, endLuxon) {\n    setModalLuxonStart(startLuxon);\n    setModalLuxonEnd(endLuxon);\n    setActivityModalOpen(true);\n  };\n  var addActivityFromCalendarClick = function addActivityFromCalendarClick(_ref6) {\n    var date = _ref6.date,\n      calendar = _ref6.view.calendar;\n    var eventStartLuxon = toLuxonDateTime(date, calendar);\n    var eventEndLuxon = eventStartLuxon.plus({\n      minutes: defaultDurationFromActivityCode('other')\n    });\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n  var addActivityFromCalendarDrag = function addActivityFromCalendarDrag(_ref7) {\n    var start = _ref7.start,\n      end = _ref7.end,\n      calendar = _ref7.view.calendar;\n    var eventStartLuxon = toLuxonDateTime(start, calendar);\n    var eventEndLuxon = toLuxonDateTime(end, calendar);\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n  var editCustomEvent = function editCustomEvent(_ref8) {\n    var fcEvent = _ref8.event,\n      calendar = _ref8.view.calendar;\n    var _fcEventToActivityAnd2 = fcEventToActivityAndDates(fcEvent, calendar),\n      activity = _fcEventToActivityAnd2.activity,\n      startLuxon = _fcEventToActivityAnd2.startLuxon,\n      endLuxon = _fcEventToActivityAnd2.endLuxon;\n    var canEdit = activity.activityCode.startsWith('other-');\n    if (canEdit) {\n      setModalActivity(activity);\n      setModalLuxonStart(startLuxon);\n      setModalLuxonEnd(endLuxon);\n      setActivityModalOpen(true);\n    }\n  };\n  var onActivityModalClose = function onActivityModalClose(ok, modalData) {\n    setActivityModalOpen(false);\n    var activityCode = modalData.activityCode,\n      activityName = modalData.activityName;\n    if (ok) {\n      if (modalActivity) {\n        dispatch(editActivity(modalActivity.id, 'activityCode', activityCode));\n        dispatch(editActivity(modalActivity.id, 'name', activityName));\n      } else {\n        var utcStartIso = luxonToWcifIso(modalLuxonStart);\n        var utcEndIso = luxonToWcifIso(modalLuxonEnd);\n        var activity = {\n          name: activityName,\n          activityCode: activityCode,\n          startTime: utcStartIso,\n          endTime: utcEndIso,\n          childActivities: []\n        };\n        dispatch(addActivity(activity, wcifRoom.id));\n      }\n    }\n\n    // cleanup.\n    setModalActivity(null);\n    setModalLuxonStart(null);\n    setModalLuxonEnd(null);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"schedules-edit-panel-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    textAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    horizontal: true,\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, wcifSchedule.venues.map(function (venue) {\n    return /*#__PURE__*/React.createElement(List.Item, {\n      key: venue.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"home\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(List.Content, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(List.Header, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    }, venue.name), /*#__PURE__*/React.createElement(List.List, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }\n    }, venue.rooms.map(function (room) {\n      return /*#__PURE__*/React.createElement(List.Item, {\n        key: room.id,\n        as: \"a\",\n        onClick: function onClick() {\n          return setSelectedRoomId(room.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }\n      }, room.id === (wcifRoom === null || wcifRoom === void 0 ? void 0 : wcifRoom.id) ? /*#__PURE__*/React.createElement(\"b\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 51\n        }\n      }, room.name) : room.name);\n    }))));\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }\n  }), selectedRoomId === undefined && /*#__PURE__*/React.createElement(Message, {\n    info: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, \"Please select a room by clicking one of the labels above\"), selectedRoomId !== undefined && /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(EditActivityModal, {\n    isModalOpen: isActivityModalOpen,\n    activity: modalActivity,\n    startLuxon: modalLuxonStart,\n    endLuxon: modalLuxonEnd,\n    dateLocale: calendarLocale,\n    onModalClose: onActivityModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Sticky, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Segment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ActivityPicker, {\n    wcifEvents: wcifEvents,\n    wcifRoom: wcifRoom,\n    listRef: activityPickerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    text: true,\n    textAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }, \"The timezone for this room is\", ' ', /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 19\n    }\n  }, friendlyTimezoneName(wcifVenue.timezone))), /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Popup, {\n    trigger: /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: \"cog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 34\n      }\n    }),\n    on: \"click\",\n    position: \"right center\",\n    pinned: true,\n    flowing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Popup.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 25\n    }\n  }, \"Calendar settings\"), /*#__PURE__*/React.createElement(Popup.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Minutes per row\",\n    name: \"row-mins\",\n    type: \"number\",\n    min: 5,\n    max: 30,\n    step: 5,\n    value: minutesPerRow,\n    onChange: setMinutesPerRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Calendar starts at\",\n    name: \"cal-start\",\n    type: \"number\",\n    min: 0,\n    max: 24,\n    value: calendarStart,\n    onChange: setCalendarStart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Calendar ends at\",\n    name: \"cal-end\",\n    type: \"number\",\n    min: 0,\n    max: 24,\n    value: calendarEnd,\n    onChange: setCalendarEnd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Ref, {\n    innerRef: dropToDeleteRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Message, {\n    negative: true,\n    floating: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 27\n    }\n  }), \"Drop an event here to remove it from the schedule.\", /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 27\n    }\n  })))))), /*#__PURE__*/React.createElement(FullCalendar\n  // plugins for the basic FullCalendar implementation.\n  //   - timeGridPlugin: Display days as vertical grid\n  //   - luxonPlugin: Support timezones\n  //   - interactionPlugin: Support dragging events from the sidebar\n  , {\n    plugins: [timeGridPlugin, luxonPlugin, interactionPlugin]\n    // define our \"own\" view (which is basically just saying how many days we want)\n    ,\n    initialView: \"agendaForComp\",\n    views: {\n      agendaForComp: {\n        type: 'timeGrid',\n        duration: {\n          days: wcifSchedule.numberOfDays\n        }\n      }\n    },\n    initialDate: wcifSchedule.startDate\n    // by default, FC offers support for separate \"whole-day\" events\n    ,\n    allDaySlot: false\n    // by default, FC would show a \"skip to next day\" toolbar\n    ,\n    headerToolbar: false\n    // the next three values can be configured via a popup menu\n    ,\n    slotMinTime: fcSlotMin,\n    slotMaxTime: fcSlotMax,\n    slotDuration: fcSlotDuration\n    // force FC to automagically compute an event's \"end\" flag,\n    //   if the event doesn't specify one itself\n    ,\n    forceEventDuration: true,\n    defaultTimedEventDuration: \"00:30:00\"\n    // no debuf when an event drag was cancelled\n    ,\n    dragRevertDuration: 0\n    // make it so that the user's mouse must travel some non-zero distance\n    //   until any \"drag\" event is triggered\n    ,\n    selectMinDistance: 5,\n    height: \"auto\"\n    // intervals in which the events \"snap\" to the calendar grid\n    ,\n    snapDuration: \"00:05:00\"\n    // display color for background + text\n    ,\n    eventColor: wcifRoom.color,\n    eventTextColor: getTextColor(wcifRoom.color)\n    // localization settings\n    ,\n    locale: calendarLocale,\n    timeZone: wcifVenue.timezone\n    // FIRE IN DA HOLE!\n    ,\n    events: fcActivities\n    // make the calendar editable\n    ,\n    editable: true,\n    eventDragStop: removeIfOverDropzone\n    // allow moving events as a whole around\n    ,\n    eventStartEditable: true,\n    eventDrop: changeActivityTimeslot\n    // allow resizing events, and explicitly allow resizing on both ends\n    ,\n    eventDurationEditable: true,\n    eventResizableFromStart: true,\n    eventResize: resizeActivity\n    // allow dropping external events onto the schedule\n    ,\n    droppable: true,\n    eventReceive: addActivityFromPicker\n    // allow highlighting an (empty) timeslot with your mouse to create a new event\n    ,\n    selectable: true,\n    dateClick: addActivityFromCalendarClick,\n    select: addActivityFromCalendarDrag\n    // allow clicking on existing events to edit them\n    ,\n    eventClick: editCustomEvent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 17\n    }\n  }))))));\n}\nexport default EditActivities;","map":{"version":3,"names":["React","useCallback","useMemo","useRef","useState","Button","Container","Divider","Form","Grid","Icon","List","Message","Popup","Ref","Segment","Sticky","FullCalendar","interactionPlugin","Draggable","timeGridPlugin","luxonPlugin","toLuxonDateTime","toLuxonDuration","useDispatch","useStore","useConfirm","useInputState","ActivityPicker","roomWcifFromId","venueWcifFromRoomId","getTextColor","addActivity","editActivity","moveActivity","removeActivity","scaleActivity","friendlyTimezoneName","defaultDurationFromActivityCode","fcEventToActivityAndDates","luxonToWcifIso","EditActivityModal","EditActivities","_ref","_this","wcifEvents","calendarLocale","_useStore","wcifSchedule","dispatch","confirm","_useInputState","_useInputState2","_slicedToArray","selectedRoomId","setSelectedRoomId","_useInputState3","_useInputState4","minutesPerRow","setMinutesPerRow","_useInputState5","_useInputState6","calendarStart","setCalendarStart","_useInputState7","_useInputState8","calendarEnd","setCalendarEnd","_useState","_useState2","isActivityModalOpen","setActivityModalOpen","_useState3","_useState4","modalActivity","setModalActivity","_useState5","_useState6","modalLuxonStart","setModalLuxonStart","_useState7","_useState8","modalLuxonEnd","setModalLuxonEnd","fcSlotDuration","concat","toString","padStart","fcSlotMin","fcSlotMax","wcifVenue","wcifRoom","fcActivities","activities","map","activity","title","name","start","startTime","end","endTime","extendedProps","activityId","id","activityCode","childActivities","activityPickerRef","node","itemSelector","eventData","eventEl","getAttribute","defaultDuration","duration","dropToDeleteRef","removeIfOverDropzone","_ref2","fcEvent","event","jsEvent","current","elem","rect","getBoundingClientRect","top","window","scrollY","bottom","left","scrollX","right","pageX","pageY","content","then","addActivityFromPicker","_ref3","calendar","view","_fcEventToActivityAnd","changeActivityTimeslot","_ref4","delta","deltaIso","toISO","resizeActivity","_ref5","startDelta","endDelta","startScaleDuration","startScaleIso","endScaleDuration","endScaleIso","addActivityFromCalendar","startLuxon","endLuxon","addActivityFromCalendarClick","_ref6","date","eventStartLuxon","eventEndLuxon","plus","minutes","addActivityFromCalendarDrag","_ref7","editCustomEvent","_ref8","_fcEventToActivityAnd2","canEdit","startsWith","onActivityModalClose","ok","modalData","activityName","utcStartIso","utcEndIso","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","horizontal","size","venues","venue","Item","key","Content","Header","rooms","room","as","onClick","undefined","info","fluid","isModalOpen","dateLocale","onModalClose","Row","Column","width","listRef","text","timezone","verticalAlign","trigger","secondary","icon","on","position","pinned","flowing","Input","label","type","min","max","step","value","onChange","innerRef","negative","floating","plugins","initialView","views","agendaForComp","days","numberOfDays","initialDate","startDate","allDaySlot","headerToolbar","slotMinTime","slotMaxTime","slotDuration","forceEventDuration","defaultTimedEventDuration","dragRevertDuration","selectMinDistance","height","snapDuration","eventColor","color","eventTextColor","locale","timeZone","events","editable","eventDragStop","eventStartEditable","eventDrop","eventDurationEditable","eventResizableFromStart","eventResize","droppable","eventReceive","selectable","dateClick","select","eventClick"],"sources":["/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/index.js"],"sourcesContent":["import React, {\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport {\n  Button,\n  Container,\n  Divider,\n  Form,\n  Grid,\n  Icon, List,\n  Message,\n  Popup, Ref, Segment,\n  Sticky,\n} from 'semantic-ui-react';\n\nimport FullCalendar from '@fullcalendar/react';\nimport interactionPlugin, { Draggable } from '@fullcalendar/interaction';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport luxonPlugin, { toLuxonDateTime, toLuxonDuration } from '@fullcalendar/luxon3';\n\nimport { useDispatch, useStore } from '../../../lib/providers/StoreProvider';\nimport { useConfirm } from '../../../lib/providers/ConfirmProvider';\nimport useInputState from '../../../lib/hooks/useInputState';\nimport ActivityPicker from './ActivityPicker';\nimport { roomWcifFromId, venueWcifFromRoomId } from '../../../lib/utils/wcif';\nimport { getTextColor } from '../../../lib/utils/calendar';\n\nimport {\n  addActivity,\n  editActivity,\n  moveActivity,\n  removeActivity,\n  scaleActivity,\n} from '../store/actions';\n\nimport { friendlyTimezoneName } from '../../../lib/wca-data.js.erb';\nimport {\n  defaultDurationFromActivityCode,\n  fcEventToActivityAndDates,\n  luxonToWcifIso,\n} from '../../../lib/utils/edit-schedule';\nimport EditActivityModal from './EditActivityModal';\n\nfunction EditActivities({\n  wcifEvents,\n  calendarLocale,\n}) {\n  const { wcifSchedule } = useStore();\n  const dispatch = useDispatch();\n\n  const confirm = useConfirm();\n\n  const [selectedRoomId, setSelectedRoomId] = useInputState();\n\n  const [minutesPerRow, setMinutesPerRow] = useInputState(15);\n  const [calendarStart, setCalendarStart] = useInputState(8);\n  const [calendarEnd, setCalendarEnd] = useInputState(20);\n\n  // This part is ugly because Semantic-UI and Fullcalendar disagree\n  //   about how modals should be handled.\n  // According to Semantic-UI, modals are \"always there\" in the DOM,\n  //   just that their \"isOpen\" state is false most of the time.\n  //   So they simply don't show but they are already part of the DOM tree.\n  // The (click-)event-based model of Fullcalendar however dictates that\n  //   we can only \"instantiate\" a modal once the user actually clicks somewhere on the calendar.\n  //   So we pre-fill the modal with empty state and set it accordingly on every event click.\n  // If somebody has a better idea how to handle this, please shout.\n  const [isActivityModalOpen, setActivityModalOpen] = useState(false);\n\n  const [modalActivity, setModalActivity] = useState();\n\n  const [modalLuxonStart, setModalLuxonStart] = useState();\n  const [modalLuxonEnd, setModalLuxonEnd] = useState();\n  // ------ MODAL HACK END ------\n\n  const fcSlotDuration = useMemo(() => `00:${minutesPerRow.toString().padStart(2, '0')}:00`, [minutesPerRow]);\n\n  const fcSlotMin = useMemo(() => `${calendarStart.toString().padStart(2, '0')}:00:00`, [calendarStart]);\n  const fcSlotMax = useMemo(() => `${calendarEnd.toString().padStart(2, '0')}:00:00`, [calendarEnd]);\n\n  const wcifVenue = useMemo(\n    () => venueWcifFromRoomId(wcifSchedule, selectedRoomId),\n    [selectedRoomId, wcifSchedule],\n  );\n\n  const wcifRoom = useMemo(\n    () => roomWcifFromId(wcifSchedule, selectedRoomId),\n    [selectedRoomId, wcifSchedule],\n  );\n\n  const fcActivities = useMemo(() => (\n    wcifRoom?.activities.map((activity) => ({\n      title: activity.name,\n      start: activity.startTime,\n      end: activity.endTime,\n      extendedProps: {\n        activityId: activity.id,\n        activityCode: activity.activityCode,\n        childActivities: activity.childActivities,\n      },\n    }))\n  ), [wcifRoom?.activities]);\n\n  // we 'fake' our own ref due to quirks in useRef + useEffect combinations.\n  // See https://medium.com/@teh_builder/ref-objects-inside-useeffect-hooks-eb7c15198780\n  const activityPickerRef = useCallback((node) => {\n    if (!node) return;\n\n    // eslint-disable-next-line no-new\n    new Draggable(node, {\n      itemSelector: '.fc-draggable',\n      eventData: (eventEl) => {\n        const activityCode = eventEl.getAttribute('wcif-ac');\n        const defaultDuration = defaultDurationFromActivityCode(activityCode);\n\n        return {\n          title: eventEl.getAttribute('wcif-title'),\n          duration: `00:${defaultDuration.toString().padStart(2, '0')}:00`,\n          extendedProps: {\n            activityCode,\n          },\n        };\n      },\n    });\n  }, []);\n\n  const dropToDeleteRef = useRef(null);\n\n  const removeIfOverDropzone = ({ event: fcEvent, jsEvent }) => {\n    if (!dropToDeleteRef.current) return;\n\n    const elem = dropToDeleteRef.current;\n    const rect = elem.getBoundingClientRect();\n\n    const top = rect.top + window.scrollY;\n    const bottom = rect.bottom + window.scrollY;\n    const left = rect.left + window.scrollX;\n    const right = rect.right + window.scrollX;\n\n    if (\n      jsEvent.pageX >= left\n        && jsEvent.pageX <= right\n        && jsEvent.pageY >= top\n        && jsEvent.pageY <= bottom\n    ) {\n      confirm({\n        content: `Are you sure you want to delete the event ${fcEvent.title}? THIS ACTION CANNOT BE UNDONE!`,\n      }).then(() => {\n        const { activityId } = fcEvent.extendedProps;\n        dispatch(removeActivity(activityId));\n      });\n    }\n  };\n\n  const addActivityFromPicker = ({ event: fcEvent, view: { calendar } }) => {\n    const { activity } = fcEventToActivityAndDates(fcEvent, calendar);\n\n    dispatch(addActivity(activity, wcifRoom.id));\n  };\n\n  const changeActivityTimeslot = ({\n    event: fcEvent,\n    delta,\n    view: { calendar },\n  }) => {\n    const { activityId } = fcEvent.extendedProps;\n\n    const duration = toLuxonDuration(delta, calendar);\n    const deltaIso = duration.toISO();\n\n    dispatch(moveActivity(activityId, deltaIso));\n  };\n\n  const resizeActivity = ({\n    event: fcEvent,\n    startDelta,\n    endDelta,\n    view: { calendar },\n  }) => {\n    const { activityId } = fcEvent.extendedProps;\n\n    const startScaleDuration = toLuxonDuration(startDelta, calendar);\n    const startScaleIso = startScaleDuration.toISO();\n\n    const endScaleDuration = toLuxonDuration(endDelta, calendar);\n    const endScaleIso = endScaleDuration.toISO();\n\n    dispatch(scaleActivity(activityId, startScaleIso, endScaleIso));\n  };\n\n  const addActivityFromCalendar = (startLuxon, endLuxon) => {\n    setModalLuxonStart(startLuxon);\n    setModalLuxonEnd(endLuxon);\n\n    setActivityModalOpen(true);\n  };\n\n  const addActivityFromCalendarClick = ({ date, view: { calendar } }) => {\n    const eventStartLuxon = toLuxonDateTime(date, calendar);\n    const eventEndLuxon = eventStartLuxon.plus({ minutes: defaultDurationFromActivityCode('other') });\n\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n\n  const addActivityFromCalendarDrag = ({ start, end, view: { calendar } }) => {\n    const eventStartLuxon = toLuxonDateTime(start, calendar);\n    const eventEndLuxon = toLuxonDateTime(end, calendar);\n\n    addActivityFromCalendar(eventStartLuxon, eventEndLuxon);\n  };\n\n  const editCustomEvent = ({ event: fcEvent, view: { calendar } }) => {\n    const {\n      activity,\n      startLuxon,\n      endLuxon,\n    } = fcEventToActivityAndDates(fcEvent, calendar);\n\n    const canEdit = activity.activityCode.startsWith('other-');\n\n    if (canEdit) {\n      setModalActivity(activity);\n\n      setModalLuxonStart(startLuxon);\n      setModalLuxonEnd(endLuxon);\n\n      setActivityModalOpen(true);\n    }\n  };\n\n  const onActivityModalClose = (ok, modalData) => {\n    setActivityModalOpen(false);\n\n    const { activityCode, activityName } = modalData;\n\n    if (ok) {\n      if (modalActivity) {\n        dispatch(editActivity(modalActivity.id, 'activityCode', activityCode));\n        dispatch(editActivity(modalActivity.id, 'name', activityName));\n      } else {\n        const utcStartIso = luxonToWcifIso(modalLuxonStart);\n        const utcEndIso = luxonToWcifIso(modalLuxonEnd);\n\n        const activity = {\n          name: activityName,\n          activityCode,\n          startTime: utcStartIso,\n          endTime: utcEndIso,\n          childActivities: [],\n        };\n\n        dispatch(addActivity(activity, wcifRoom.id));\n      }\n    }\n\n    // cleanup.\n    setModalActivity(null);\n\n    setModalLuxonStart(null);\n    setModalLuxonEnd(null);\n  };\n\n  return (\n    <div id=\"schedules-edit-panel-body\">\n      <Container textAlign=\"center\">\n        <List horizontal size=\"large\">\n          {wcifSchedule.venues.map((venue) => (\n            <List.Item key={venue.id}>\n              <Icon name=\"home\" />\n              <List.Content>\n                <List.Header>{venue.name}</List.Header>\n                <List.List>\n                  {venue.rooms.map((room) => (\n                    <List.Item\n                      key={room.id}\n                      as=\"a\"\n                      onClick={() => setSelectedRoomId(room.id)}\n                    >\n                      {room.id === wcifRoom?.id ? <b>{room.name}</b> : room.name}\n                    </List.Item>\n                  ))}\n                </List.List>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      </Container>\n      <Divider />\n      {selectedRoomId === undefined && (\n        <Message info>Please select a room by clicking one of the labels above</Message>\n      )}\n      {selectedRoomId !== undefined && (\n        <Container fluid>\n          <EditActivityModal\n            isModalOpen={isActivityModalOpen}\n            activity={modalActivity}\n            startLuxon={modalLuxonStart}\n            endLuxon={modalLuxonEnd}\n            dateLocale={calendarLocale}\n            onModalClose={onActivityModalClose}\n          />\n          <Grid>\n            <Grid.Row>\n              <Grid.Column width={4}>\n                <Sticky>\n                  <Segment>\n                    <ActivityPicker\n                      wcifEvents={wcifEvents}\n                      wcifRoom={wcifRoom}\n                      listRef={activityPickerRef}\n                    />\n                  </Segment>\n                </Sticky>\n              </Grid.Column>\n              <Grid.Column width={12}>\n                <Container text textAlign=\"center\">\n                  The timezone for this room is\n                  {' '}\n                  <b>{friendlyTimezoneName(wcifVenue.timezone)}</b>\n                </Container>\n                <Container fluid>\n                  <Grid textAlign=\"center\" verticalAlign=\"middle\">\n                    <Grid.Column width={1}>\n                      <Popup\n                        trigger={<Button secondary icon=\"cog\" />}\n                        on=\"click\"\n                        position=\"right center\"\n                        pinned\n                        flowing\n                      >\n                        <Popup.Header>Calendar settings</Popup.Header>\n                        <Popup.Content>\n                          <Form>\n                            <Form.Input\n                              label=\"Minutes per row\"\n                              name=\"row-mins\"\n                              type=\"number\"\n                              min={5}\n                              max={30}\n                              step={5}\n                              value={minutesPerRow}\n                              onChange={setMinutesPerRow}\n                            />\n                            <Form.Input\n                              label=\"Calendar starts at\"\n                              name=\"cal-start\"\n                              type=\"number\"\n                              min={0}\n                              max={24}\n                              value={calendarStart}\n                              onChange={setCalendarStart}\n                            />\n                            <Form.Input\n                              label=\"Calendar ends at\"\n                              name=\"cal-end\"\n                              type=\"number\"\n                              min={0}\n                              max={24}\n                              value={calendarEnd}\n                              onChange={setCalendarEnd}\n                            />\n                          </Form>\n                        </Popup.Content>\n                      </Popup>\n                    </Grid.Column>\n                    <Grid.Column width={15}>\n                      <Ref innerRef={dropToDeleteRef}>\n                        <Message negative floating>\n                          <Icon name=\"trash\" />\n                          Drop an event here to remove it from the schedule.\n                          <Icon name=\"trash\" />\n                        </Message>\n                      </Ref>\n                    </Grid.Column>\n                  </Grid>\n                </Container>\n                <FullCalendar\n                  // plugins for the basic FullCalendar implementation.\n                  //   - timeGridPlugin: Display days as vertical grid\n                  //   - luxonPlugin: Support timezones\n                  //   - interactionPlugin: Support dragging events from the sidebar\n                  plugins={[timeGridPlugin, luxonPlugin, interactionPlugin]}\n                  // define our \"own\" view (which is basically just saying how many days we want)\n                  initialView=\"agendaForComp\"\n                  views={{\n                    agendaForComp: {\n                      type: 'timeGrid',\n                      duration: { days: wcifSchedule.numberOfDays },\n                    },\n                  }}\n                  initialDate={wcifSchedule.startDate}\n                  // by default, FC offers support for separate \"whole-day\" events\n                  allDaySlot={false}\n                  // by default, FC would show a \"skip to next day\" toolbar\n                  headerToolbar={false}\n                  // the next three values can be configured via a popup menu\n                  slotMinTime={fcSlotMin}\n                  slotMaxTime={fcSlotMax}\n                  slotDuration={fcSlotDuration}\n                  // force FC to automagically compute an event's \"end\" flag,\n                  //   if the event doesn't specify one itself\n                  forceEventDuration\n                  defaultTimedEventDuration=\"00:30:00\"\n                  // no debuf when an event drag was cancelled\n                  dragRevertDuration={0}\n                  // make it so that the user's mouse must travel some non-zero distance\n                  //   until any \"drag\" event is triggered\n                  selectMinDistance={5}\n                  height=\"auto\"\n                  // intervals in which the events \"snap\" to the calendar grid\n                  snapDuration=\"00:05:00\"\n                  // display color for background + text\n                  eventColor={wcifRoom.color}\n                  eventTextColor={getTextColor(wcifRoom.color)}\n                  // localization settings\n                  locale={calendarLocale}\n                  timeZone={wcifVenue.timezone}\n                  // FIRE IN DA HOLE!\n                  events={fcActivities}\n                  // make the calendar editable\n                  editable\n                  eventDragStop={removeIfOverDropzone}\n                  // allow moving events as a whole around\n                  eventStartEditable\n                  eventDrop={changeActivityTimeslot}\n                  // allow resizing events, and explicitly allow resizing on both ends\n                  eventDurationEditable\n                  eventResizableFromStart\n                  eventResize={resizeActivity}\n                  // allow dropping external events onto the schedule\n                  droppable\n                  eventReceive={addActivityFromPicker}\n                  // allow highlighting an (empty) timeslot with your mouse to create a new event\n                  selectable\n                  dateClick={addActivityFromCalendarClick}\n                  select={addActivityFromCalendarDrag}\n                  // allow clicking on existing events to edit them\n                  eventClick={editCustomEvent}\n                />\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </Container>\n      )}\n    </div>\n  );\n}\n\nexport default EditActivities;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}