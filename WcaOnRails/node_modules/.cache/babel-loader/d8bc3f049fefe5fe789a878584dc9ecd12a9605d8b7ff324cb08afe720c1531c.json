{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/Results/ResultForm/PersonForm.js\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useState, useEffect } from 'react';\nimport { Icon, Form, Grid, Popup } from 'semantic-ui-react';\nimport CountrySelector from \"../../CountrySelector/CountrySelector\";\nimport { personApiUrl } from \"../../../lib/requests/routes.js.erb\";\nimport { fetchJsonOrError } from \"../../../lib/requests/fetchWithAuthenticityToken\";\nimport useNestedInputUpdater from \"../../../lib/hooks/useNestedInputUpdater\";\nfunction PersonForm(_ref) {\n  var personData = _ref.personData,\n    setPersonData = _ref.setPersonData;\n  var wcaId = personData.wcaId,\n    name = personData.name,\n    countryIso2 = personData.countryIso2;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    wcaIdError = _useState2[0],\n    setWcaIdError = _useState2[1];\n\n  // Clear any person data request error upon WCA ID change.\n  useEffect(function () {\n    return setWcaIdError(null);\n  }, [wcaId]);\n  var setWcaId = useNestedInputUpdater(setPersonData, 'wcaId');\n  var setName = useNestedInputUpdater(setPersonData, 'name');\n  var setCountryIso2 = useNestedInputUpdater(setPersonData, 'countryIso2');\n\n  // Create a function to get person data from the API.\n  var fetchDataForWcaId = function fetchDataForWcaId(id) {\n    setWcaIdError(null);\n    fetchJsonOrError(personApiUrl(id)).then(function (_ref2) {\n      var data = _ref2.data;\n      var person = data.person;\n      setPersonData({\n        wcaId: person.wca_id,\n        name: person.name,\n        countryIso2: person.country_iso2\n      });\n    })[\"catch\"](function (err) {\n      return setWcaIdError(err.message);\n    });\n  };\n  return /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    stackable: true,\n    padded: true,\n    columns: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"WCA ID\",\n    onChange: setWcaId,\n    error: wcaIdError,\n    value: wcaId,\n    icon: /*#__PURE__*/React.createElement(Popup, {\n      trigger: /*#__PURE__*/React.createElement(Icon, {\n        circular: true,\n        link: true,\n        onClick: function onClick() {\n          return fetchDataForWcaId(wcaId);\n        },\n        name: \"sync\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 19\n        }\n      }),\n      content: \"Get the person data for that WCA ID and fill the form\",\n      position: \"top right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 15\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Name\",\n    onChange: setName,\n    value: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CountrySelector, {\n    countryIso2: countryIso2,\n    onChange: setCountryIso2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }))));\n}\nexport default PersonForm;","map":{"version":3,"names":["React","useState","useEffect","Icon","Form","Grid","Popup","CountrySelector","personApiUrl","fetchJsonOrError","useNestedInputUpdater","PersonForm","_ref","personData","setPersonData","wcaId","name","countryIso2","_useState","_useState2","_slicedToArray","wcaIdError","setWcaIdError","setWcaId","setName","setCountryIso2","fetchDataForWcaId","id","then","_ref2","data","person","wca_id","country_iso2","err","message","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","stackable","padded","columns","Column","Input","label","onChange","error","value","icon","trigger","circular","link","onClick","content","position"],"sources":["/app/WcaOnRails/app/webpacker/components/Results/ResultForm/PersonForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Icon, Form, Grid, Popup,\n} from 'semantic-ui-react';\n\nimport CountrySelector from '../../CountrySelector/CountrySelector';\nimport { personApiUrl } from '../../../lib/requests/routes.js.erb';\nimport { fetchJsonOrError } from '../../../lib/requests/fetchWithAuthenticityToken';\nimport useNestedInputUpdater from '../../../lib/hooks/useNestedInputUpdater';\n\nfunction PersonForm({ personData, setPersonData }) {\n  const { wcaId, name, countryIso2 } = personData;\n  const [wcaIdError, setWcaIdError] = useState(null);\n\n  // Clear any person data request error upon WCA ID change.\n  useEffect(() => setWcaIdError(null), [wcaId]);\n\n  const setWcaId = useNestedInputUpdater(setPersonData, 'wcaId');\n  const setName = useNestedInputUpdater(setPersonData, 'name');\n  const setCountryIso2 = useNestedInputUpdater(setPersonData, 'countryIso2');\n\n  // Create a function to get person data from the API.\n  const fetchDataForWcaId = (id) => {\n    setWcaIdError(null);\n    fetchJsonOrError(personApiUrl(id)).then(({ data }) => {\n      const { person } = data;\n      setPersonData({\n        wcaId: person.wca_id,\n        name: person.name,\n        countryIso2: person.country_iso2,\n      });\n    }).catch((err) => setWcaIdError(err.message));\n  };\n\n  return (\n    <Form>\n      <Grid stackable padded columns={3}>\n        <Grid.Column>\n          <Form.Input\n            label=\"WCA ID\"\n            onChange={setWcaId}\n            error={wcaIdError}\n            value={wcaId}\n            icon={(\n              <Popup\n                trigger={(\n                  <Icon\n                    circular\n                    link\n                    onClick={() => fetchDataForWcaId(wcaId)}\n                    name=\"sync\"\n                  />\n                )}\n                content=\"Get the person data for that WCA ID and fill the form\"\n                position=\"top right\"\n              />\n          )}\n          />\n        </Grid.Column>\n        <Grid.Column>\n          <Form.Input\n            label=\"Name\"\n            onChange={setName}\n            value={name}\n          />\n        </Grid.Column>\n        <Grid.Column>\n          <CountrySelector\n            countryIso2={countryIso2}\n            onChange={setCountryIso2}\n          />\n        </Grid.Column>\n      </Grid>\n    </Form>\n  );\n}\n\nexport default PersonForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}