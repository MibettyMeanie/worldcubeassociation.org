{"ast":null,"code":"import _partial from \"lodash/partial\";\nimport _map from \"lodash/map\";\nimport _filter from \"lodash/filter\";\nimport _flatMap from \"lodash/flatMap\";\nimport { events } from \"./wca-data.js.erb\";\nimport { getTextColor } from \"./utils/calendar\";\nvar dataByVenueId = {};\nwindow.wca = window.wca || {};\nwindow.wca.registerVenueData = function (id, venueData) {\n  dataByVenueId[id] = venueData;\n};\nvar getCalendarElemId = function getCalendarElemId(venueId) {\n  return \"#calendar-venue-\".concat(venueId);\n};\nvar getScheduleElemId = function getScheduleElemId(venueId) {\n  return \"#schedule-venue-\".concat(venueId);\n};\nvar toggleScheduleView = function toggleScheduleView(venueId, showTable) {\n  var $scheduleElem = $(getScheduleElemId(venueId));\n  $scheduleElem.find('.schedule_table_container').toggle(showTable);\n  $scheduleElem.find('.schedule_calendar_container').toggle(!showTable);\n  $scheduleElem.find('.schedule-table-link').toggleClass('active', showTable);\n  $scheduleElem.find('.schedule-calendar-link').toggleClass('active', !showTable);\n};\n\n// fullCalendar's events fetcher function.\n// 'callback' must be called passing all events that should be rendered on the calendar\nvar fetchCalendarEvents = function fetchCalendarEvents(venueId, start, end, timezone, callback) {\n  // We don't really care about timezone or start/end as we only have events for\n  // a specific competition and venue.\n  var allEvents = dataByVenueId[venueId].events;\n  var rooms = $(\"#room-list-\".concat(venueId)).find('.selected');\n  var calendarEvents = _flatMap(rooms, function (room) {\n    return _filter(allEvents, {\n      roomId: $(room).data('room')\n    });\n  });\n  var selectedEvents = _map($(\"#schedule-venue-\".concat(venueId, \" .events-filter > i.selected\")), function (e) {\n    return $(e).data('event').toString();\n  });\n  // Filter events by id only if they are WCA events\n  // (we don't want to filter custom activities for which event_id is \"other\").\n  var filterableEventIds = Object.keys(events.byId);\n  calendarEvents = _filter(calendarEvents, function (e) {\n    return selectedEvents.includes(e.activityDetails.event_id) || !filterableEventIds.includes(e.activityDetails.event_id);\n  });\n  callback(calendarEvents);\n};\nvar GREY = '#666666';\nvar initFullCalendar = function initFullCalendar($elem, calendarParams) {\n  var venueData = dataByVenueId[calendarParams.venueId];\n  var options = {\n    events: _partial(fetchCalendarEvents, calendarParams.venueId),\n    eventDataTransform: function eventDataTransform(eventData) {\n      var ev = eventData;\n      if (ev.activityDetails.event_id.startsWith('other')) {\n        ev.color = GREY;\n      }\n      ev.textColor = getTextColor(ev.color);\n      return ev;\n    },\n    eventRender: function eventRender(event, element) {\n      var popoverContent = calendarParams.popoverContentBuilder(event);\n      var $element = $(element);\n      if (!popoverContent) {\n        return;\n      }\n      $element.addClass('has-popover');\n      $element.click(function (e) {\n        // Hide other popovers to only have one at once.\n        $('.has-popover').popover('hide');\n        $(e.currentTarget).popover('toggle');\n        e.stopPropagation();\n      });\n      $element.popover({\n        title: \"<strong>\".concat(event.title, \"</strong>\"),\n        container: 'body',\n        html: true,\n        content: \"<div class=\\\"round-info-popover\\\">\".concat(popoverContent, \"</div>\"),\n        trigger: 'manual',\n        placement: 'top'\n      });\n    },\n    defaultView: 'agendaForComp',\n    header: false,\n    allDaySlot: false,\n    locale: calendarParams.locale,\n    minTime: venueData.minTime,\n    maxTime: venueData.maxTime,\n    slotDuration: '00:15:00',\n    height: 'auto',\n    defaultDate: calendarParams.startDate,\n    views: {\n      agendaForComp: {\n        type: 'agenda',\n        duration: {\n          days: calendarParams.numberOfDays\n        },\n        buttonText: 'Calendar'\n      }\n    }\n  };\n  $elem.fullCalendar(options);\n};\nvar onClickCalencarLinkAction = function onClickCalencarLinkAction(popoverContentBuilder, locale, startDate, numberOfDays, e) {\n  e.preventDefault();\n  var venueId = $(e.currentTarget).data('venue');\n  toggleScheduleView(venueId, false);\n  var $calendar = $(getCalendarElemId(venueId));\n  if (!$calendar.hasClass('initialized')) {\n    $calendar.addClass('initialized');\n    initFullCalendar($calendar, {\n      locale: locale,\n      venueId: venueId,\n      startDate: startDate,\n      numberOfDays: numberOfDays,\n      popoverContentBuilder: popoverContentBuilder\n    });\n  } else {\n    $calendar.fullCalendar('refetchEvents');\n  }\n};\n\n// Setup click event on \"table\" links (one for each venue)\nvar onClickTableLinkAction = function onClickTableLinkAction(e) {\n  e.preventDefault();\n  toggleScheduleView($(e.currentTarget).data('venue'), true);\n};\nvar maybeRefreshEvents = function maybeRefreshEvents(venueId) {\n  var $calendar = $(getCalendarElemId(venueId));\n  var idSelector = getScheduleElemId(venueId);\n  // Refetch event only if calendar is visible\n  if ($(\"\".concat(idSelector, \" .schedule-calendar-link\")).hasClass('active')) {\n    if ($calendar.hasClass('initialized')) {\n      $calendar.fullCalendar('refetchEvents');\n    }\n  }\n};\n\n// Callback when the user click the \"all\" icon for events\nvar onClickAllAction = function onClickAllAction(e) {\n  // The \"ALL\" button\n  var $allButton = $(e.currentTarget);\n  // The whole filter with all events icons\n  var $filter = $allButton.parent();\n  var selectAll = !$allButton.hasClass('selected');\n  $allButton.toggleClass('selected', selectAll);\n  $filter.find('.cubing-icon').each(function (index, element) {\n    var $element = $(element);\n    $element.toggleClass('selected', selectAll);\n    var eventId = $element.data('event');\n    // Table view action\n    $(\".schedule-table .event-\".concat(eventId)).toggleClass('event-selected', selectAll);\n  });\n  var venueId = $filter.data('venue');\n  // Calendar action\n  maybeRefreshEvents(venueId);\n};\n\n// Callback when the user click an event icon (actually updates *all* the filters in all venues)\nvar onClickEventIconAction = function onClickEventIconAction(e) {\n  // The event icon\n  var $elem = $(e.currentTarget);\n  var $filter = $elem.parent();\n  // Event id for this event icon\n  var eventId = $elem.data('event');\n\n  // Toggle the event visibility\n  $elem.toggleClass('selected');\n  $(\".schedule-table .event-\".concat(eventId)).toggleClass('event-selected');\n\n  // The whole filter with all events icons contains the venue id\n  var venueId = $filter.data('venue');\n\n  // Calendar action\n  maybeRefreshEvents(venueId);\n\n  // Now check if we should change the \"ALL\" buttons status\n  var $allButton = $filter.find('.event-all').first();\n  var allEvents = $filter.find('.cubing-icon');\n  var selectedEvents = $filter.find('.cubing-icon.selected');\n  $allButton.toggleClass('selected', allEvents.length === selectedEvents.length);\n};\n\n// Callback when the user click on a room's name\nvar onClickOnRoomAction = function onClickOnRoomAction(e) {\n  e.preventDefault();\n  // Starts by hiding all popovers\n  $('.has-popover').popover('hide');\n  var $room = $(e.currentTarget);\n  var roomId = $room.data('room');\n  var venueId = $room.data('venue');\n\n  // Toggle the room line's status\n  $room.find('input').prop('checked', !$room.hasClass('selected'));\n  $room.toggleClass('selected');\n  // Action for the Table view\n  $(\".room-\".concat(roomId)).toggleClass('room-selected');\n\n  // Avoid focus on the line\n  $room.blur();\n\n  // Action for the calendar\n  maybeRefreshEvents(venueId);\n};\nwindow.wca.setupCalendarAndFilter = function (popoverContentBuilder, locale, startDate, numberOfDays) {\n  // Setup click action on calendar links\n  $('.schedule-calendar-link').click(_partial(onClickCalencarLinkAction, popoverContentBuilder, locale, startDate, numberOfDays));\n  $('.schedule-table-link').click(onClickTableLinkAction);\n\n  // Setup events filter actions\n  $('.events-filter .event-all').click(onClickAllAction);\n  $('.events-filter i.cubing-icon').click(onClickEventIconAction);\n\n  // Setup rooms filter action\n  $('.toggle-room').click(onClickOnRoomAction);\n\n  // Hide popovers with round's information whenever we click somewhere\n  $('body').click(function () {\n    return $('.has-popover').popover('hide');\n  });\n};","map":{"version":3,"names":["events","getTextColor","dataByVenueId","window","wca","registerVenueData","id","venueData","getCalendarElemId","venueId","concat","getScheduleElemId","toggleScheduleView","showTable","$scheduleElem","$","find","toggle","toggleClass","fetchCalendarEvents","start","end","timezone","callback","allEvents","rooms","calendarEvents","_flatMap","room","_filter","roomId","data","selectedEvents","_map","e","toString","filterableEventIds","Object","keys","byId","includes","activityDetails","event_id","GREY","initFullCalendar","$elem","calendarParams","options","_partial","eventDataTransform","eventData","ev","startsWith","color","textColor","eventRender","event","element","popoverContent","popoverContentBuilder","$element","addClass","click","popover","currentTarget","stopPropagation","title","container","html","content","trigger","placement","defaultView","header","allDaySlot","locale","minTime","maxTime","slotDuration","height","defaultDate","startDate","views","agendaForComp","type","duration","days","numberOfDays","buttonText","fullCalendar","onClickCalencarLinkAction","preventDefault","$calendar","hasClass","onClickTableLinkAction","maybeRefreshEvents","idSelector","onClickAllAction","$allButton","$filter","parent","selectAll","each","index","eventId","onClickEventIconAction","first","length","onClickOnRoomAction","$room","prop","blur","setupCalendarAndFilter"],"sources":["/app/WcaOnRails/app/webpacker/lib/show-schedule.js"],"sourcesContent":["import _ from 'lodash';\nimport { events } from './wca-data.js.erb';\nimport { getTextColor } from './utils/calendar';\n\nconst dataByVenueId = {\n};\n\nwindow.wca = window.wca || {};\n\nwindow.wca.registerVenueData = (id, venueData) => {\n  dataByVenueId[id] = venueData;\n};\n\nconst getCalendarElemId = (venueId) => `#calendar-venue-${venueId}`;\nconst getScheduleElemId = (venueId) => `#schedule-venue-${venueId}`;\n\nconst toggleScheduleView = (venueId, showTable) => {\n  const $scheduleElem = $(getScheduleElemId(venueId));\n  $scheduleElem.find('.schedule_table_container').toggle(showTable);\n  $scheduleElem.find('.schedule_calendar_container').toggle(!showTable);\n  $scheduleElem.find('.schedule-table-link').toggleClass('active', showTable);\n  $scheduleElem.find('.schedule-calendar-link').toggleClass('active', !showTable);\n};\n\n// fullCalendar's events fetcher function.\n// 'callback' must be called passing all events that should be rendered on the calendar\nconst fetchCalendarEvents = (venueId, start, end, timezone, callback) => {\n  // We don't really care about timezone or start/end as we only have events for\n  // a specific competition and venue.\n  const allEvents = dataByVenueId[venueId].events;\n  const rooms = $(`#room-list-${venueId}`).find('.selected');\n  let calendarEvents = _.flatMap(rooms, (room) => _.filter(allEvents, { roomId: $(room).data('room') }));\n  const selectedEvents = _.map(\n    $(`#schedule-venue-${venueId} .events-filter > i.selected`),\n    (e) => $(e).data('event').toString(),\n  );\n  // Filter events by id only if they are WCA events\n  // (we don't want to filter custom activities for which event_id is \"other\").\n  const filterableEventIds = Object.keys(events.byId);\n  calendarEvents = _.filter(\n    calendarEvents,\n    (e) => selectedEvents.includes(e.activityDetails.event_id)\n      || !filterableEventIds.includes(e.activityDetails.event_id),\n  );\n  callback(calendarEvents);\n};\n\nconst GREY = '#666666';\n\nconst initFullCalendar = ($elem, calendarParams) => {\n  const venueData = dataByVenueId[calendarParams.venueId];\n  const options = {\n    events: _.partial(fetchCalendarEvents, calendarParams.venueId),\n    eventDataTransform: (eventData) => {\n      const ev = eventData;\n      if (ev.activityDetails.event_id.startsWith('other')) {\n        ev.color = GREY;\n      }\n      ev.textColor = getTextColor(ev.color);\n      return ev;\n    },\n    eventRender: (event, element) => {\n      const popoverContent = calendarParams.popoverContentBuilder(event);\n      const $element = $(element);\n      if (!popoverContent) {\n        return;\n      }\n      $element.addClass('has-popover');\n      $element.click((e) => {\n        // Hide other popovers to only have one at once.\n        $('.has-popover').popover('hide');\n        $(e.currentTarget).popover('toggle');\n        e.stopPropagation();\n      });\n      $element.popover({\n        title: `<strong>${event.title}</strong>`,\n        container: 'body',\n        html: true,\n        content: `<div class=\"round-info-popover\">${popoverContent}</div>`,\n        trigger: 'manual',\n        placement: 'top',\n      });\n    },\n    defaultView: 'agendaForComp',\n    header: false,\n    allDaySlot: false,\n    locale: calendarParams.locale,\n    minTime: venueData.minTime,\n    maxTime: venueData.maxTime,\n    slotDuration: '00:15:00',\n    height: 'auto',\n    defaultDate: calendarParams.startDate,\n    views: {\n      agendaForComp: {\n        type: 'agenda',\n        duration: { days: calendarParams.numberOfDays },\n        buttonText: 'Calendar',\n      },\n    },\n  };\n  $elem.fullCalendar(options);\n};\n\nconst onClickCalencarLinkAction = (popoverContentBuilder, locale, startDate, numberOfDays, e) => {\n  e.preventDefault();\n  const venueId = $(e.currentTarget).data('venue');\n  toggleScheduleView(venueId, false);\n  const $calendar = $(getCalendarElemId(venueId));\n  if (!$calendar.hasClass('initialized')) {\n    $calendar.addClass('initialized');\n    initFullCalendar($calendar, {\n      locale, venueId, startDate, numberOfDays, popoverContentBuilder,\n    });\n  } else {\n    $calendar.fullCalendar('refetchEvents');\n  }\n};\n\n// Setup click event on \"table\" links (one for each venue)\nconst onClickTableLinkAction = (e) => {\n  e.preventDefault();\n  toggleScheduleView($(e.currentTarget).data('venue'), true);\n};\n\nconst maybeRefreshEvents = (venueId) => {\n  const $calendar = $(getCalendarElemId(venueId));\n  const idSelector = getScheduleElemId(venueId);\n  // Refetch event only if calendar is visible\n  if ($(`${idSelector} .schedule-calendar-link`).hasClass('active')) {\n    if ($calendar.hasClass('initialized')) {\n      $calendar.fullCalendar('refetchEvents');\n    }\n  }\n};\n\n// Callback when the user click the \"all\" icon for events\nconst onClickAllAction = (e) => {\n  // The \"ALL\" button\n  const $allButton = $(e.currentTarget);\n  // The whole filter with all events icons\n  const $filter = $allButton.parent();\n\n  const selectAll = !$allButton.hasClass('selected');\n  $allButton.toggleClass('selected', selectAll);\n  $filter.find('.cubing-icon').each((index, element) => {\n    const $element = $(element);\n    $element.toggleClass('selected', selectAll);\n    const eventId = $element.data('event');\n    // Table view action\n    $(`.schedule-table .event-${eventId}`).toggleClass('event-selected', selectAll);\n  });\n  const venueId = $filter.data('venue');\n  // Calendar action\n  maybeRefreshEvents(venueId);\n};\n\n// Callback when the user click an event icon (actually updates *all* the filters in all venues)\nconst onClickEventIconAction = (e) => {\n  // The event icon\n  const $elem = $(e.currentTarget);\n  const $filter = $elem.parent();\n  // Event id for this event icon\n  const eventId = $elem.data('event');\n\n  // Toggle the event visibility\n  $elem.toggleClass('selected');\n  $(`.schedule-table .event-${eventId}`).toggleClass('event-selected');\n\n  // The whole filter with all events icons contains the venue id\n  const venueId = $filter.data('venue');\n\n  // Calendar action\n  maybeRefreshEvents(venueId);\n\n  // Now check if we should change the \"ALL\" buttons status\n  const $allButton = $filter.find('.event-all').first();\n  const allEvents = $filter.find('.cubing-icon');\n  const selectedEvents = $filter.find('.cubing-icon.selected');\n  $allButton.toggleClass('selected', allEvents.length === selectedEvents.length);\n};\n\n// Callback when the user click on a room's name\nconst onClickOnRoomAction = (e) => {\n  e.preventDefault();\n  // Starts by hiding all popovers\n  $('.has-popover').popover('hide');\n\n  const $room = $(e.currentTarget);\n  const roomId = $room.data('room');\n  const venueId = $room.data('venue');\n\n  // Toggle the room line's status\n  $room.find('input').prop('checked', !$room.hasClass('selected'));\n  $room.toggleClass('selected');\n  // Action for the Table view\n  $(`.room-${roomId}`).toggleClass('room-selected');\n\n  // Avoid focus on the line\n  $room.blur();\n\n  // Action for the calendar\n  maybeRefreshEvents(venueId);\n};\n\nwindow.wca.setupCalendarAndFilter = (popoverContentBuilder, locale, startDate, numberOfDays) => {\n  // Setup click action on calendar links\n  $('.schedule-calendar-link').click(_.partial(\n    onClickCalencarLinkAction,\n    popoverContentBuilder,\n    locale,\n    startDate,\n    numberOfDays,\n  ));\n  $('.schedule-table-link').click(onClickTableLinkAction);\n\n  // Setup events filter actions\n  $('.events-filter .event-all').click(onClickAllAction);\n  $('.events-filter i.cubing-icon').click(onClickEventIconAction);\n\n  // Setup rooms filter action\n  $('.toggle-room').click(onClickOnRoomAction);\n\n  // Hide popovers with round's information whenever we click somewhere\n  $('body').click(() => $('.has-popover').popover('hide'));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}