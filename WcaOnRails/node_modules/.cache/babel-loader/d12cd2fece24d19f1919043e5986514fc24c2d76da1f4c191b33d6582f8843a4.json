{"ast":null,"code":"import _times from \"lodash/times\";\nvar _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/ActivityPicker.js\";\nimport React, { useMemo } from 'react';\nimport { Label, List, Popup, Ref } from 'semantic-ui-react';\nimport cn from 'classnames';\nimport { parseActivityCode, roundIdToString } from \"../../../lib/utils/wcif\";\nimport { formats } from \"../../../lib/wca-data.js.erb\";\nfunction ActivityPicker(_ref) {\n  var _this = this;\n  var wcifEvents = _ref.wcifEvents,\n    wcifRoom = _ref.wcifRoom,\n    listRef = _ref.listRef;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Ref, {\n    innerRef: listRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    relaxed: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, wcifEvents.map(function (event) {\n    return /*#__PURE__*/React.createElement(List.Item, {\n      key: event.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(List.Icon, {\n      className: cn('cubing-icon', \"event-\".concat(event.id)),\n      verticalAlign: \"middle\",\n      size: \"large\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(List.Content, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 15\n      }\n    }, event.rounds.map(function (round) {\n      return /*#__PURE__*/React.createElement(PickerRow, {\n        key: round.id,\n        wcifRoom: wcifRoom,\n        wcifEvent: event,\n        wcifRound: round,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 19\n        }\n      });\n    })));\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, \"Want to add a custom activity such as lunch or registration? Click and select a timeframe on the calendar!\"));\n}\nfunction PickerRow(_ref2) {\n  var _this2 = this;\n  var wcifRoom = _ref2.wcifRoom,\n    wcifEvent = _ref2.wcifEvent,\n    wcifRound = _ref2.wcifRound;\n  if (['333fm', '333mbf'].includes(wcifEvent.id)) {\n    var numberOfAttempts = formats.byId[wcifRound.format].expectedSolveCount;\n    return _times(numberOfAttempts, function (n) {\n      return /*#__PURE__*/React.createElement(ActivityLabel, {\n        key: n,\n        wcifRoom: wcifRoom,\n        activityCode: \"\".concat(wcifRound.id, \"-a\").concat(n + 1),\n        attemptNumber: n + 1,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }\n      });\n    });\n  }\n  return /*#__PURE__*/React.createElement(ActivityLabel, {\n    wcifRoom: wcifRoom,\n    activityCode: wcifRound.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  });\n}\nfunction ActivityLabel(_ref3) {\n  var wcifRoom = _ref3.wcifRoom,\n    activityCode = _ref3.activityCode,\n    attemptNumber = _ref3.attemptNumber;\n  var usedActivityCodes = useMemo(function () {\n    return wcifRoom.activities.map(function (activity) {\n      return activity.activityCode;\n    });\n  }, [wcifRoom.activities]);\n  var _parseActivityCode = parseActivityCode(activityCode),\n    roundNumber = _parseActivityCode.roundNumber;\n  var tooltipText = roundIdToString(activityCode);\n  var text = \"R\".concat(roundNumber);\n  if (attemptNumber) {\n    tooltipText += \", Attempt \".concat(attemptNumber);\n    text += \"A\".concat(attemptNumber);\n  }\n  var isEnabled = !usedActivityCodes.includes(activityCode);\n  return /*#__PURE__*/React.createElement(Popup, {\n    content: tooltipText,\n    trigger: /*#__PURE__*/React.createElement(Label, {\n      className: isEnabled ? 'fc-draggable' : '',\n      color: isEnabled ? 'blue' : 'grey',\n      \"wcif-title\": tooltipText,\n      \"wcif-ac\": activityCode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, text),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  });\n}\nexport default ActivityPicker;","map":{"version":3,"names":["React","useMemo","Label","List","Popup","Ref","cn","parseActivityCode","roundIdToString","formats","ActivityPicker","_ref","_this","wcifEvents","wcifRoom","listRef","createElement","Fragment","innerRef","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","relaxed","map","event","Item","key","id","Icon","className","concat","verticalAlign","size","Content","rounds","round","PickerRow","wcifEvent","wcifRound","_ref2","_this2","includes","numberOfAttempts","byId","format","expectedSolveCount","_times","n","ActivityLabel","activityCode","attemptNumber","_ref3","usedActivityCodes","activities","activity","_parseActivityCode","roundNumber","tooltipText","text","isEnabled","content","trigger","color"],"sources":["/app/WcaOnRails/app/webpacker/components/EditSchedule/EditActivities/ActivityPicker.js"],"sourcesContent":["import React, { useMemo } from 'react';\nimport {\n  Label,\n  List,\n  Popup,\n  Ref,\n} from 'semantic-ui-react';\nimport cn from 'classnames';\nimport _ from 'lodash';\nimport {\n  parseActivityCode,\n  roundIdToString,\n} from '../../../lib/utils/wcif';\nimport { formats } from '../../../lib/wca-data.js.erb';\n\nfunction ActivityPicker({\n  wcifEvents,\n  wcifRoom,\n  listRef,\n}) {\n  return (\n    <>\n      <Ref innerRef={listRef}>\n        <List relaxed>\n          {wcifEvents.map((event) => (\n            <List.Item key={event.id}>\n              <List.Icon\n                className={cn('cubing-icon', `event-${event.id}`)}\n                verticalAlign=\"middle\"\n                size=\"large\"\n              />\n              <List.Content>\n                {event.rounds.map((round) => (\n                  <PickerRow\n                    key={round.id}\n                    wcifRoom={wcifRoom}\n                    wcifEvent={event}\n                    wcifRound={round}\n                  />\n                ))}\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      </Ref>\n      <p>\n        Want to add a custom activity such as lunch or registration?\n        Click and select a timeframe on the calendar!\n      </p>\n    </>\n  );\n}\n\nfunction PickerRow({\n  wcifRoom,\n  wcifEvent,\n  wcifRound,\n}) {\n  if (['333fm', '333mbf'].includes(wcifEvent.id)) {\n    const numberOfAttempts = formats.byId[wcifRound.format].expectedSolveCount;\n\n    return _.times(numberOfAttempts, (n) => (\n      <ActivityLabel\n        key={n}\n        wcifRoom={wcifRoom}\n        activityCode={`${wcifRound.id}-a${n + 1}`}\n        attemptNumber={n + 1}\n      />\n    ));\n  }\n\n  return (\n    <ActivityLabel\n      wcifRoom={wcifRoom}\n      activityCode={wcifRound.id}\n    />\n  );\n}\n\nfunction ActivityLabel({\n  wcifRoom,\n  activityCode,\n  attemptNumber,\n}) {\n  const usedActivityCodes = useMemo(\n    () => wcifRoom.activities.map((activity) => activity.activityCode),\n    [wcifRoom.activities],\n  );\n\n  const { roundNumber } = parseActivityCode(activityCode);\n\n  let tooltipText = roundIdToString(activityCode);\n  let text = `R${roundNumber}`;\n\n  if (attemptNumber) {\n    tooltipText += `, Attempt ${attemptNumber}`;\n    text += `A${attemptNumber}`;\n  }\n\n  const isEnabled = !usedActivityCodes.includes(activityCode);\n\n  return (\n    <Popup\n      content={tooltipText}\n      trigger={(\n        <Label\n          className={isEnabled ? 'fc-draggable' : ''}\n          color={isEnabled ? 'blue' : 'grey'}\n          wcif-title={tooltipText}\n          wcif-ac={activityCode}\n        >\n          {text}\n        </Label>\n      )}\n    />\n  );\n}\n\nexport default ActivityPicker;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}