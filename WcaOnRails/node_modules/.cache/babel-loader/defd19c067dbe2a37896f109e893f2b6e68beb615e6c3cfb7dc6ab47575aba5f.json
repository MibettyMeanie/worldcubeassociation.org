{"ast":null,"code":"var _jsxFileName = \"/app/WcaOnRails/app/webpacker/components/EditVenue/VenueLocationInput.js\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport React from 'react';\nimport { Row, Col } from 'react-bootstrap';\n// Import leaflet, and the fix for the icon url\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport \"../../lib/leaflet-wca\";\nimport { userTileProvider } from \"../../lib/leaflet-wca/providers\";\nimport { toDegrees } from \"../../lib/utils/edit-schedule\";\n\n/* eslint react/prop-types: \"off\" */\n/* eslint max-classes-per-file: \"off\" */\nvar InvisibleIFrame = /*#__PURE__*/function (_React$Component) {\n  _inherits(InvisibleIFrame, _React$Component);\n  var _super = _createSuper(InvisibleIFrame);\n  function InvisibleIFrame() {\n    _classCallCheck(this, InvisibleIFrame);\n    return _super.apply(this, arguments);\n  }\n  _createClass(InvisibleIFrame, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var onResizeAction = this.props.onResizeAction;\n      this.iframe.contentWindow.addEventListener('resize', onResizeAction);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var onResizeAction = this.props.onResizeAction;\n      this.iframe.contentWindow.removeEventListener('resize', onResizeAction);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n      return /*#__PURE__*/React.createElement(\"iframe\", {\n        title: \"invisibleIFrame\",\n        src: \"about:blank\",\n        className: \"invisible-iframe-map\",\n        ref: function ref(m) {\n          _this.iframe = m;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n  return InvisibleIFrame;\n}(React.Component);\nvar VenueLocationInput = /*#__PURE__*/function (_React$Component2) {\n  _inherits(VenueLocationInput, _React$Component2);\n  var _super2 = _createSuper(VenueLocationInput);\n  function VenueLocationInput() {\n    _classCallCheck(this, VenueLocationInput);\n    return _super2.apply(this, arguments);\n  }\n  _createClass(VenueLocationInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var map = this.mapElem.leafletElement;\n      window.wca.createSearchInput(map);\n      var handleGeoSearchResult = function handleGeoSearchResult(result) {\n        var marker = _this2.markerElem.leafletElement;\n        marker.setLatLng({\n          lat: result.location.y,\n          lng: result.location.x\n        });\n        marker.bindPopup(result.location.label).openPopup();\n      };\n      map.on('geosearch/showlocation', handleGeoSearchResult);\n      map.zoomControl.setPosition('bottomright');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props = this.props,\n        lat = _this$props.lat,\n        lng = _this$props.lng,\n        actionHandler = _this$props.actionHandler;\n      var provider = userTileProvider;\n      var mapPosition = {\n        lat: toDegrees(lat),\n        lng: toDegrees(lng)\n      };\n      var invalidateSize = function invalidateSize() {\n        _this3.mapElem.leafletElement.invalidateSize(false);\n      };\n      return /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"venue-form-label control-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }, \"Please pick the venue location below:\")), /*#__PURE__*/React.createElement(Col, {\n        xs: 12,\n        className: \"venue-map\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Map, {\n        center: mapPosition,\n        zoom: 16,\n        scrollWheelZoom: false,\n        ref: function ref(m) {\n          _this3.mapElem = m;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(InvisibleIFrame, {\n        onResizeAction: invalidateSize,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(TileLayer, {\n        url: provider.url,\n        attribution: provider.attribution,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Marker, {\n        position: mapPosition,\n        draggable: true,\n        onMove: actionHandler,\n        ref: function ref(m) {\n          _this3.markerElem = m;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n  return VenueLocationInput;\n}(React.Component);\nexport { VenueLocationInput as default };","map":{"version":3,"names":["React","Row","Col","Map","TileLayer","Marker","userTileProvider","toDegrees","InvisibleIFrame","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","componentDidMount","onResizeAction","props","iframe","contentWindow","addEventListener","componentWillUnmount","removeEventListener","render","_this","createElement","title","src","className","ref","m","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Component","VenueLocationInput","_React$Component2","_super2","_this2","map","mapElem","leafletElement","window","wca","createSearchInput","handleGeoSearchResult","result","marker","markerElem","setLatLng","lat","location","y","lng","x","bindPopup","label","openPopup","on","zoomControl","setPosition","_this3","_this$props","actionHandler","provider","mapPosition","invalidateSize","xs","center","zoom","scrollWheelZoom","url","attribution","position","draggable","onMove","default"],"sources":["/app/WcaOnRails/app/webpacker/components/EditVenue/VenueLocationInput.js"],"sourcesContent":["import React from 'react';\nimport { Row, Col } from 'react-bootstrap';\n// Import leaflet, and the fix for the icon url\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport '../../lib/leaflet-wca';\nimport { userTileProvider } from '../../lib/leaflet-wca/providers';\nimport { toDegrees } from '../../lib/utils/edit-schedule';\n\n/* eslint react/prop-types: \"off\" */\n/* eslint max-classes-per-file: \"off\" */\n\nclass InvisibleIFrame extends React.Component {\n  componentDidMount() {\n    const { onResizeAction } = this.props;\n    this.iframe.contentWindow.addEventListener('resize', onResizeAction);\n  }\n\n  componentWillUnmount() {\n    const { onResizeAction } = this.props;\n    this.iframe.contentWindow.removeEventListener('resize', onResizeAction);\n  }\n\n  render() {\n    return (\n      <iframe\n        title=\"invisibleIFrame\"\n        src=\"about:blank\"\n        className=\"invisible-iframe-map\"\n        ref={(m) => { this.iframe = m; }}\n      />\n    );\n  }\n}\n\nexport default class VenueLocationInput extends React.Component {\n  componentDidMount() {\n    const map = this.mapElem.leafletElement;\n    window.wca.createSearchInput(map);\n    const handleGeoSearchResult = (result) => {\n      const marker = this.markerElem.leafletElement;\n      marker.setLatLng({\n        lat: result.location.y,\n        lng: result.location.x,\n      });\n      marker.bindPopup(result.location.label).openPopup();\n    };\n    map.on('geosearch/showlocation', handleGeoSearchResult);\n    map.zoomControl.setPosition('bottomright');\n  }\n\n  render() {\n    const { lat, lng, actionHandler } = this.props;\n    const provider = userTileProvider;\n    const mapPosition = { lat: toDegrees(lat), lng: toDegrees(lng) };\n\n    const invalidateSize = () => {\n      this.mapElem.leafletElement.invalidateSize(false);\n    };\n\n    return (\n      <Row>\n        <Col xs={12}>\n          <span className=\"venue-form-label control-label\">Please pick the venue location below:</span>\n        </Col>\n        <Col xs={12} className=\"venue-map\">\n          <Map\n            center={mapPosition}\n            zoom={16}\n            scrollWheelZoom={false}\n            ref={(m) => { this.mapElem = m; }}\n          >\n            <InvisibleIFrame onResizeAction={invalidateSize} />\n            <TileLayer url={provider.url} attribution={provider.attribution} />\n            <Marker\n              position={mapPosition}\n              draggable\n              onMove={actionHandler}\n              ref={(m) => { this.markerElem = m; }}\n            />\n          </Map>\n        </Col>\n      </Row>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}